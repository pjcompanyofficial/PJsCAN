<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Project Code</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; margin: 0; padding: 20px; background-color: #121212; color: #e0e0e0; }
        pre { background-color: #1e1e1e; padding: 15px; border-radius: 5px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #333; }
        h1 { color: hsl(28, 100%, 50%); }
        h2 { color: #a0a0a0; border-top: 1px solid #444; padding-top: 20px; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Combined Code from All Project Files</h1>
    <p>As requested, all project files have been combined into this single file. This is a text representation and not a runnable application.</p>
    <pre><code>
// =========================================================================
// FILE: .env
// =========================================================================


# Firebase Configuration
# These are public keys for client-side Firebase initialization.
NEXT_PUBLIC_FIREBASE_API_KEY=&quot;AIzaSyCYCMvd3MLf4oYIzlLqJ5KjzwvJrMF0t4&quot;
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=&quot;pj-official-dashboard.firebaseapp.com&quot;
NEXT_PUBLIC_FIREBASE_PROJECT_ID=&quot;pj-official-dashboard&quot;
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=&quot;pj-official-dashboard.firebasestorage.app&quot;
NEXT_PUBLIC_FIREBASE_APP_ID=&quot;1:929357284971:web:2fd68f9f8f87c3a8d2137a&quot;


// =========================================================================
// FILE: README.md
// =========================================================================

# Firebase Studio

This is a NextJS starter in Firebase Studio.

To get started, take a look at src/app/page.tsx.

---

## Code for Requested Pages

Here is the code for the pages you requested, to make it easier to copy.

### `src/app/employee-rules/page.tsx`

```tsx
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from &#039;@/components/ui/card&#039;;
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from &#039;@/components/ui/accordion&#039;;

const rules = [
    {
        title: &quot;1. Customer Interaction&quot;,
        english: &quot;Every employee must communicate politely and respectfully with all customers. Abusive language or rude behavior is strictly prohibited. Your primary goal is to provide a positive experience.&quot;,
        hindi: &quot;प्रत्येक कर्मचारी को सभी ग्राहकों के साथ विनम्रता और सम्मानपूर्वक संवाद करना चाहिए। अपमानजनक भाषा या अशिष्ट व्यवहार सख्त वर्जित है। आपका प्राथमिक लक्ष्य एक सकारात्मक अनुभव प्रदान करना है।&quot;
    },
    {
        title: &quot;2. Official Documentation&quot;,
        english: &quot;All employees are required to possess their official Employee Confidential Information (ECC) document at all times during work hours. An individual without this document will not be recognized as a company employee.&quot;,
        hindi: &quot;सभी कर्मचारियों को काम के घंटों के दौरान हर समय अपना आधिकारिक कर्मचारी गोपनीय सूचना (ईसीसी) दस्तावेज़ रखना आवश्यक है। इस दस्तावेज़ के बिना किसी भी व्यक्ति को कंपनी का कर्मचारी नहीं माना जाएगा।&quot;
    },
    {
        title: &quot;3. Discipline and Regulation&quot;,
        english: &quot;Maintain utmost discipline and professionalism during company work hours. All work must be performed uniformly and ethically. Any inappropriate activities are strictly forbidden.&quot;,
        hindi: &quot;कंपनी के काम के घंटों के दौरान अत्यंत अनुशासन और व्यावसायिकता बनाए रखें। सभी काम समान रूप से और नैतिक रूप से किए जाने चाहिए। किसी भी प्रकार की अनुचित गतिविधियाँ सख्त वर्जित हैं।&quot;
    },
    {
        title: &quot;4. Primary Job Role&quot;,
        english: &quot;The main responsibility of an employee is to find and attract new customers for the company. It is crucial to treat every potential and existing customer with respect and provide them with accurate information.&quot;,
        hindi: &quot;एक कर्मचारी की मुख्य जिम्मेदारी कंपनी के लिए नए ग्राहक ढूंढना और उन्हें आकर्षित करना है। प्रत्येक संभावित और मौजूदा ग्राहक के साथ सम्मान से पेश आना और उन्हें सटीक जानकारी प्रदान करना महत्वपूर्ण है।&quot;
    },
    {
        title: &quot;5. Commission and Incentives&quot;,
        english: &quot;Compensation is performance-based. For sales from clients purchasing flutes under ₹1000, you will receive a 25% commission. For sales from clients purchasing flutes worth ₹1000 or more, you will receive a 30% commission. Top-performing employees will be rewarded with higher commission tiers (30% instead of 25%, and 35% instead of 30%), with the potential to reach up to 40%. This opportunity is reserved for consistent top performers.&quot;,
        hindi: &quot;मुआवजा प्रदर्शन-आधारित है। ₹1000 से कम की बांसुरी खरीदने वाले ग्राहकों से बिक्री के लिए, आपको 25% कमीशन मिलेगा। ₹1000 या उससे अधिक की बांसुरी खरीदने वाले ग्राहकों से बिक्री के लिए, आपको 30% कमीशन मिलेगा। शीर्ष प्रदर्शन करने वाले कर्मचारियों को उच्च कमीशन स्तरों से पुरस्कृत किया जाएगा (25% के बजाय 30%, और 30% के बजाय 35%), जिसमें 40% तक पहुंचने की क्षमता है। यह अवसर केवल लगातार शीर्ष प्रदर्शन करने वालों के लिए आरक्षित है।&quot;
    },
    {
        title: &quot;6. Hierarchy and Respect&quot;,
        english: &quot;All employees must respect the company&#039;s hierarchy. Show the highest respect to the Owner, followed by the CEO, and then the Chief of Staff (CoS) or Personal Assistant (PA). Disrespectful behavior towards anyone in the company will not be tolerated. Maintain discipline at all times.&quot;,
        hindi: &quot;सभी कर्मचारियों को कंपनी के पदानुक्रम का सम्मान करना चाहिए। मालिक को सर्वोच्च सम्मान दें, उसके बाद सीईओ, और फिर चीफ ऑफ स्टाफ (सीओएस) या पर्सनल असिस्टेंट (पीए) को। कंपनी में किसी के भी प्रति अनादरपूर्ण व्यवहार बर्दाश्त नहीं किया जाएगा। हर समय अनुशासन बनाए रखें।&quot;
    }
];


export default function EmployeeRulesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-4xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Employee Rules &amp; Guidelines&lt;/h2&gt;
            &lt;Card&gt;
                &lt;CardHeader&gt;
                    &lt;CardTitle&gt;Code of Conduct&lt;/CardTitle&gt;
                    &lt;CardDescription&gt;
                        These rules are mandatory for all PJ OFFICIAL employees to ensure a professional, respectful, and productive work environment.
                    &lt;/CardDescription&gt;
                &lt;/CardHeader&gt;
                &lt;CardContent&gt;
                    &lt;Accordion type=&quot;single&quot; collapsible className=&quot;w-full&quot;&gt;
                        {rules.map((rule, index) =&gt; (
                            &lt;AccordionItem value={`item-${index}`} key={index}&gt;
                                &lt;AccordionTrigger className=&quot;text-lg hover:no-underline&quot;&gt;{rule.title}&lt;/AccordionTrigger&gt;
                                &lt;AccordionContent className=&quot;space-y-4 px-2&quot;&gt;
                                    &lt;div&gt;
                                        &lt;h4 className=&quot;font-semibold mb-1 text-base text-foreground&quot;&gt;English:&lt;/h4&gt;
                                        &lt;p className=&quot;text-muted-foreground&quot;&gt;{rule.english}&lt;/p&gt;
                                    &lt;/div&gt;
                                    &lt;div&gt;
                                        &lt;h4 className=&quot;font-semibold mb-1 text-base text-foreground&quot;&gt;Hindi (हिन्दी):&lt;/h4&gt;
                                        &lt;p className=&quot;text-muted-foreground&quot;&gt;{rule.hindi}&lt;/p&gt;
                                    &lt;/div&gt;
                                &lt;/AccordionContent&gt;
                            &lt;/AccordionItem&gt;
                        ))}
                    &lt;/Accordion&gt;
                &lt;/CardContent&gt;
            &lt;/Card&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}
```

### `src/app/flute-bamboo-quality/page.tsx`

```tsx
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from &#039;@/components/ui/card&#039;;
import ProcessingInfo from &#039;@/components/quality/ProcessingInfo&#039;;
import { Separator } from &#039;@/components/ui/separator&#039;;

export default function FluteBambooQualityPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-4xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Flute &amp; Bamboo Quality&lt;/h2&gt;

            &lt;Card&gt;
                &lt;CardHeader&gt;
                    &lt;CardTitle&gt;Flute Quality Tiers&lt;/CardTitle&gt;
                    &lt;CardDescription&gt;Details about our range of flutes.&lt;/CardDescription&gt;
                &lt;/CardHeader&gt;
                &lt;CardContent className=&quot;space-y-4&quot;&gt;
                    &lt;div className=&quot;rounded-lg border bg-card p-4&quot;&gt;
                        &lt;h3 className=&quot;font-semibold text-lg text-foreground&quot;&gt;Normal Quality Flutes&lt;/h3&gt;
                        &lt;p className=&quot;text-muted-foreground&quot;&gt;Price Range: &lt;span className=&quot;font-bold text-primary&quot;&gt;₹400 – ₹8,000&lt;/span&gt;&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;rounded-lg border bg-card p-4&quot;&gt;
                        &lt;h3 className=&quot;font-semibold text-lg text-foreground&quot;&gt;Premium Quality Flutes&lt;/h3&gt;
                        &lt;p className=&quot;text-muted-foreground&quot;&gt;Price Range: &lt;span className=&quot;font-bold text-primary&quot;&gt;₹700 – ₹20,000&lt;/span&gt;&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/CardContent&gt;
            &lt;/Card&gt;

            &lt;Separator /&gt;
            
            &lt;ProcessingInfo /&gt;

        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}
```

### `src/app/cii/page.tsx`

```tsx
&#039;use client&#039;;

import { useState, useRef } from &#039;react&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &#039;@/components/ui/card&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { useLocalStorage } from &#039;@/hooks/use-local-storage&#039;;
import Image from &#039;next/image&#039;;
import { PlusCircle, Trash2, Download, UserPlus, FileUp } from &#039;lucide-react&#039;;
import SecureDeleteDialog from &#039;@/components/cii/SecureDeleteDialog&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { PlaceHolderImages } from &#039;@/lib/placeholder-images&#039;;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
  DialogTrigger,
} from &#039;@/components/ui/dialog&#039;;
import { Label } from &#039;@/components/ui/label&#039;;
import { useEmployees, type Employee } from &#039;@/hooks/use-employees&#039;;
import AddEmployeeForm from &#039;@/components/cii/AddEmployeeForm&#039;;


interface CiiImage {
  id: string;
  name: string;
  dataUrl: string;
}

const initialCiiImages: CiiImage[] = PlaceHolderImages.map(img =&gt; ({
  id: img.id,
  name: img.description,
  dataUrl: img.imageUrl,
}));

export default function CIIPage() {
  const [images, setImages] = useLocalStorage&lt;CiiImage[]&gt;(&#039;pjCiiImages&#039;, initialCiiImages);
  const fileInputRef = useRef&lt;HTMLInputElement&gt;(null);
  const { toast } = useToast();
  const { employees } = useEmployees();

  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);
  const [newImageTitle, setNewImageTitle] = useState(&#039;&#039;);
  const [newImageData, setNewImageData] = useState&lt;{ dataUrl: string; file: File } | null&gt;(null);

  const [actionsOpen, setActionsOpen] = useState(false);
  const [addEmployeeOpen, setAddEmployeeOpen] = useState(false);

  const handleImageUpload = (event: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const file = event.target.files?.[0];
    if (file) {
      if (file.size &gt; 5 * 1024 * 1024) { // 5MB limit
        toast({
          variant: &quot;destructive&quot;,
          title: &quot;File too large&quot;,
          description: &quot;Please upload an image smaller than 5MB.&quot;,
        });
        return;
      }
      const reader = new FileReader();
      reader.onload = (e) =&gt; {
        setNewImageData({ dataUrl: e.target?.result as string, file });
        setNewImageTitle(file.name); // Pre-fill title with file name
        setUploadDialogOpen(true);
        setActionsOpen(false);
      };
      reader.readAsDataURL(file);
    }
  };
  
  const handleSaveImage = () =&gt; {
    if (!newImageData || !newImageTitle.trim()) {
      toast({
        variant: &quot;destructive&quot;,
        title: &quot;Title is required&quot;,
        description: &quot;Please provide a title for the image.&quot;,
      });
      return;
    }
    
    const newImage: CiiImage = {
        id: `cii-${Date.now()}`,
        name: newImageTitle.trim(),
        dataUrl: newImageData.dataUrl,
    };

    setImages((prevImages) =&gt; [newImage, ...prevImages]);
    toast({
        title: &quot;Image Saved&quot;,
        description: `&quot;${newImage.name}&quot; has been saved to the gallery.`,
    });

    setUploadDialogOpen(false);
    setNewImageData(null);
    setNewImageTitle(&#039;&#039;);

    if (fileInputRef.current) {
        fileInputRef.current.value = &#039;&#039;;
    }
  };

  const handleUploadClick = () =&gt; {
    fileInputRef.current?.click();
  };
  
  const handleAddNewEmployee = () =&gt; {
    setActionsOpen(false);
    setAddEmployeeOpen(true);
  };


  const handleDeleteImage = (id: string, reason: string) =&gt; {
    const imageToDelete = images.find(img =&gt; img.id === id);
    setImages(images.filter((image) =&gt; image.id !== id));
    toast({
      title: &quot;Image Deleted&quot;,
      description: `&quot;${imageToDelete?.name}&quot; was deleted. Reason: ${reason}`,
    });
  };

  const handleDownloadImage = (image: CiiImage) =&gt; {
    const link = document.createElement(&#039;a&#039;);
    link.href = image.dataUrl;
    const fileName = image.name.includes(&#039;.&#039;) ? image.name.split(&#039;.&#039;)[0] : image.name;
    link.download = `${fileName}.png`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    toast({
        title: &quot;Image Downloading...&quot;,
        description: `&quot;${image.name}&quot; is being saved.`,
    })
  };

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-6xl items-start gap-6&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-primary&quot;&gt;Company Important Images&lt;/h2&gt;
             &lt;Dialog open={actionsOpen} onOpenChange={setActionsOpen}&gt;
                &lt;DialogTrigger asChild&gt;
                    &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;
                        &lt;PlusCircle className=&quot;h-5 w-5&quot; /&gt;
                    &lt;/Button&gt;
                &lt;/DialogTrigger&gt;
                &lt;DialogContent className=&quot;sm:max-w-xs&quot;&gt;
                    &lt;DialogHeader&gt;
                        &lt;DialogTitle&gt;Actions&lt;/DialogTitle&gt;
                        &lt;DialogDescription&gt;
                            What would you like to add?
                        &lt;/DialogDescription&gt;
                    &lt;/DialogHeader&gt;
                    &lt;div className=&quot;grid gap-3 py-4&quot;&gt;
                        &lt;Button variant=&quot;outline&quot; onClick={handleUploadClick}&gt;
                            &lt;FileUp className=&quot;mr-2 h-4 w-4&quot; /&gt;
                            Upload Image
                        &lt;/Button&gt;
                        &lt;Button variant=&quot;outline&quot; onClick={handleAddNewEmployee}&gt;
                           &lt;UserPlus className=&quot;mr-2 h-4 w-4&quot; /&gt;
                           Add New Employee
                        &lt;/Button&gt;
                    &lt;/div&gt;
                &lt;/DialogContent&gt;
            &lt;/Dialog&gt;
            &lt;Input
              type=&quot;file&quot;
              ref={fileInputRef}
              onChange={handleImageUpload}
              className=&quot;hidden&quot;
              accept=&quot;image/*&quot;
            /&gt;
          &lt;/div&gt;

          {images.length === 0 ? (
            &lt;Card&gt;
              &lt;CardContent className=&quot;p-10&quot;&gt;
                &lt;p className=&quot;text-center text-muted-foreground&quot;&gt;No images found. Click &#039;+&#039; to add new ones.&lt;/p&gt;
              &lt;/CardContent&gt;
            &lt;/Card&gt;
          ) : (
            &lt;div className=&quot;grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4&quot;&gt;
              {images.map((image) =&gt; (
                &lt;Card key={image.id} className=&quot;group relative overflow-hidden shadow-lg border-2 border-transparent hover:border-primary transition-all duration-300&quot;&gt;
                  &lt;CardContent className=&quot;p-0&quot;&gt;
                    &lt;Image
                      src={image.dataUrl}
                      alt={image.name}
                      width={400}
                      height={400}
                      className=&quot;aspect-square w-full object-cover transition-transform group-hover:scale-105&quot;
                      crossOrigin=&quot;anonymous&quot;
                    /&gt;
                  &lt;/CardContent&gt;
                  &lt;div className=&quot;absolute bottom-0 w-full bg-gradient-to-t from-black/80 via-black/50 to-transparent p-3&quot;&gt;
                     &lt;p className=&quot;text-white text-sm font-semibold truncate&quot;&gt;{image.name}&lt;/p&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300&quot;&gt;
                     &lt;SecureDeleteDialog 
                        imageName={image.name} 
                        onDeleteConfirm={(reason) =&gt; handleDeleteImage(image.id, reason)}
                        trigger={
                            &lt;Button variant=&quot;destructive&quot; size=&quot;icon&quot; className=&quot;h-9 w-9 rounded-full shadow-md&quot;&gt;
                                &lt;Trash2 className=&quot;h-4 w-4&quot; /&gt;
                            &lt;/Button&gt;
                        }
                      /&gt;
                  &lt;/div&gt;
                   &lt;div className=&quot;absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300&quot;&gt;
                     &lt;Button variant=&quot;secondary&quot; size=&quot;icon&quot; className=&quot;h-9 w-9 rounded-full shadow-md&quot; onClick={() =&gt; handleDownloadImage(image)}&gt;
                        &lt;Download className=&quot;h-4 w-4&quot; /&gt;
                     &lt;/Button&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              ))}
            &lt;/div&gt;
          )}

          &lt;div className=&quot;mt-8&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-primary&quot;&gt;Employee Records&lt;/h2&gt;
             &lt;Card className=&quot;mt-4&quot;&gt;
                &lt;CardHeader&gt;
                    &lt;CardTitle&gt;Current Employees&lt;/CardTitle&gt;
                    &lt;CardDescription&gt;This is the list of employees used for document verification.&lt;/CardDescription&gt;
                &lt;/CardHeader&gt;
                &lt;CardContent&gt;
                    &lt;div className=&quot;grid gap-3&quot;&gt;
                        {employees.map(emp =&gt; (
                            &lt;div key={emp.id} className=&quot;flex justify-between items-center p-3 rounded-lg border bg-secondary/30&quot;&gt;
                                &lt;div&gt;
                                    &lt;p className=&quot;font-semibold text-foreground&quot;&gt;{emp.name}&lt;/p&gt;
                                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{emp.refNumber}&lt;/p&gt;
                                &lt;/div&gt;
                                &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{emp.address}&lt;/p&gt;
                            &lt;/div&gt;
                        ))}
                    &lt;/div&gt;
                &lt;/CardContent&gt;
            &lt;/Card&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;

      {/* Dialog for adding title to new image */}
      &lt;Dialog open={uploadDialogOpen} onOpenChange={setUploadDialogOpen}&gt;
        &lt;DialogContent&gt;
            &lt;DialogHeader&gt;
                &lt;DialogTitle&gt;Add Image Title&lt;/DialogTitle&gt;
                &lt;DialogDescription&gt;
                    Provide a title for your image before saving it to the gallery.
                &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;div className=&quot;grid gap-4 py-4&quot;&gt;
                {newImageData &amp;&amp; (
                    &lt;Image
                        src={newImageData.dataUrl}
                        alt=&quot;Upload preview&quot;
                        width={400}
                        height={200}
                        className=&quot;rounded-md border aspect-video object-contain w-full&quot;
                    /&gt;
                )}
                &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
                    &lt;Label htmlFor=&quot;image-title&quot; className=&quot;text-right&quot;&gt;
                        Title
                    &lt;/Label&gt;
                    &lt;Input
                        id=&quot;image-title&quot;
                        value={newImageTitle}
                        onChange={(e) =&gt; setNewImageTitle(e.target.value)}
                        className=&quot;col-span-3&quot;
                        autoFocus
                    /&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;DialogFooter&gt;
                &lt;Button variant=&quot;outline&quot; onClick={() =&gt; setUploadDialogOpen(false)}&gt;Cancel&lt;/Button&gt;
                &lt;Button onClick={handleSaveImage} disabled={!newImageTitle.trim()}&gt;Save Image&lt;/Button&gt;
            &lt;/DialogFooter&gt;
        &lt;/DialogContent&gt;
      &lt;/Dialog&gt;
      
      {/* Dialog for adding new employee */}
      &lt;Dialog open={addEmployeeOpen} onOpenChange={setAddEmployeeOpen}&gt;
          &lt;DialogContent&gt;
              &lt;DialogHeader&gt;
                  &lt;DialogTitle&gt;Add New Employee&lt;/DialogTitle&gt;
                  &lt;DialogDescription&gt;
                      Fill in the details for the new employee. This will be saved locally.
                  &lt;/DialogDescription&gt;
              &lt;/DialogHeader&gt;
              &lt;AddEmployeeForm onFinished={() =&gt; setAddEmployeeOpen(false)} /&gt;
          &lt;/DialogContent&gt;
      &lt;/Dialog&gt;

    &lt;/div&gt;
  );
}
```


// =========================================================================
// FILE: apphosting.yaml
// =========================================================================

# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  # Increase this value if you&#039;d like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1


// =========================================================================
// FILE: components.json
// =========================================================================

{
  &quot;$schema&quot;: &quot;https://ui.shadcn.com/schema.json&quot;,
  &quot;style&quot;: &quot;default&quot;,
  &quot;rsc&quot;: true,
  &quot;tsx&quot;: true,
  &quot;tailwind&quot;: {
    &quot;config&quot;: &quot;tailwind.config.ts&quot;,
    &quot;css&quot;: &quot;src/app/globals.css&quot;,
    &quot;baseColor&quot;: &quot;neutral&quot;,
    &quot;cssVariables&quot;: true,
    &quot;prefix&quot;: &quot;&quot;
  },
  &quot;aliases&quot;: {
    &quot;components&quot;: &quot;@/components&quot;,
    &quot;utils&quot;: &quot;@/lib/utils&quot;,
    &quot;ui&quot;: &quot;@/components/ui&quot;,
    &quot;lib&quot;: &quot;@/lib&quot;,
    &quot;hooks&quot;: &quot;@/hooks&quot;
  },
  &quot;iconLibrary&quot;: &quot;lucide&quot;
}


// =========================================================================
// FILE: next.config.ts
// =========================================================================

import type {NextConfig} from &#039;next&#039;;

const nextConfig: NextConfig = {
  /* config options here */
  serverActions: {
    bodySizeLimit: &#039;5mb&#039;,
  },
  typescript: {
    ignoreBuildErrors: true,
  },
  eslint: {
    ignoreDuringBuilds: true,
  },
  images: {
    remotePatterns: [
      {
        protocol: &#039;https&#039;,
        hostname: &#039;placehold.co&#039;,
        port: &#039;&#039;,
        pathname: &#039;/**&#039;,
      },
      {
        protocol: &#039;https&#039;,
        hostname: &#039;images.unsplash.com&#039;,
        port: &#039;&#039;,
        pathname: &#039;/**&#039;,
      },
      {
        protocol: &#039;https&#039;,
        hostname: &#039;picsum.photos&#039;,
        port: &#039;&#039;,
        pathname: &#039;/**&#039;,
      },
      {
        protocol: &#039;https&#039;,
        hostname: &#039;i.postimg.cc&#039;,
        port: &#039;&#039;,
        pathname: &#039;/**&#039;,
      },
    ],
  },
};

export default nextConfig;


// =========================================================================
// FILE: package.json
// =========================================================================

{
  &quot;name&quot;: &quot;nextn&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;next dev -p 9002&quot;,
    &quot;build&quot;: &quot;NODE_ENV=production next build&quot;,
    &quot;start&quot;: &quot;next start&quot;,
    &quot;lint&quot;: &quot;next lint&quot;,
    &quot;typecheck&quot;: &quot;tsc --noEmit&quot;
  },
  &quot;dependencies&quot;: {
    &quot;@emailjs/browser&quot;: &quot;^4.3.3&quot;,
    &quot;@genkit-ai/google-genai&quot;: &quot;^1.1.0&quot;,
    &quot;@hookform/resolvers&quot;: &quot;^4.1.3&quot;,
    &quot;@radix-ui/react-accordion&quot;: &quot;^1.2.3&quot;,
    &quot;@radix-ui/react-alert-dialog&quot;: &quot;^1.1.6&quot;,
    &quot;@radix-ui/react-avatar&quot;: &quot;^1.1.3&quot;,
    &quot;@radix-ui/react-checkbox&quot;: &quot;^1.1.4&quot;,
    &quot;@radix-ui/react-collapsible&quot;: &quot;^1.1.11&quot;,
    &quot;@radix-ui/react-dialog&quot;: &quot;^1.1.6&quot;,
    &quot;@radix-ui/react-dropdown-menu&quot;: &quot;^2.1.6&quot;,
    &quot;@radix-ui/react-label&quot;: &quot;^2.1.2&quot;,
    &quot;@radix-ui/react-menubar&quot;: &quot;^1.1.6&quot;,
    &quot;@radix-ui/react-popover&quot;: &quot;^1.1.6&quot;,
    &quot;@radix-ui/react-progress&quot;: &quot;^1.1.2&quot;,
    &quot;@radix-ui/react-radio-group&quot;: &quot;^1.2.3&quot;,
    &quot;@radix-ui/react-scroll-area&quot;: &quot;^1.2.3&quot;,
    &quot;@radix-ui/react-select&quot;: &quot;^2.1.6&quot;,
    &quot;@radix-ui/react-separator&quot;: &quot;^1.1.2&quot;,
    &quot;@radix-ui/react-slider&quot;: &quot;^1.2.3&quot;,
    &quot;@radix-ui/react-slot&quot;: &quot;^1.2.3&quot;,
    &quot;@radix-ui/react-switch&quot;: &quot;^1.1.3&quot;,
    &quot;@radix-ui/react-tabs&quot;: &quot;^1.1.3&quot;,
    &quot;@radix-ui/react-toast&quot;: &quot;^1.2.6&quot;,
    &quot;@radix-ui/react-tooltip&quot;: &quot;^1.1.8&quot;,
    &quot;class-variance-authority&quot;: &quot;^0.7.1&quot;,
    &quot;clsx&quot;: &quot;^2.1.1&quot;,
    &quot;date-fns&quot;: &quot;^3.6.0&quot;,
    &quot;embla-carousel-react&quot;: &quot;^8.6.0&quot;,
    &quot;firebase&quot;: &quot;^11.9.1&quot;,
    &quot;genkit&quot;: &quot;^1.0.0&quot;,
    &quot;html2canvas&quot;: &quot;^1.4.1&quot;,
    &quot;lucide-react&quot;: &quot;^0.475.0&quot;,
    &quot;next&quot;: &quot;15.5.9&quot;,
    &quot;patch-package&quot;: &quot;^8.0.0&quot;,
    &quot;react&quot;: &quot;^19.2.1&quot;,
    &quot;react-day-picker&quot;: &quot;^9.11.3&quot;,
    &quot;react-dom&quot;: &quot;^19.2.1&quot;,
    &quot;react-hook-form&quot;: &quot;^7.54.2&quot;,
    &quot;recharts&quot;: &quot;^2.15.1&quot;,
    &quot;tailwind-merge&quot;: &quot;^3.0.1&quot;,
    &quot;tailwindcss-animate&quot;: &quot;^1.0.7&quot;,
    &quot;zod&quot;: &quot;^3.24.2&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^20&quot;,
    &quot;@types/react&quot;: &quot;^19.2.1&quot;,
    &quot;@types/react-dom&quot;: &quot;^19.2.1&quot;,
    &quot;postcss&quot;: &quot;^8&quot;,
    &quot;tailwindcss&quot;: &quot;^3.4.1&quot;,
    &quot;typescript&quot;: &quot;^5&quot;
  }
}


// =========================================================================
// FILE: src/ai/flows/verify-document-flow.ts
// =========================================================================

&#039;use server&#039;;
/**
 * @fileOverview An AI flow to verify employee documents.
 *
 * - verifyDocument - Extracts employee details from a document image.
 * - DocumentInput - The input type for the verifyDocument function.
 * - DocumentOutput - The return type for the verifyDocument function.
 */

import {ai} from &#039;@/ai/genkit&#039;;
import {z} from &#039;genkit&#039;;

const DocumentInputSchema = z.object({
  documentImageUri: z
    .string()
    .describe(
      &quot;A photo of an employee document, as a data URI that must include a MIME type and use Base64 encoding.&quot;
    ),
});
export type DocumentInput = z.infer&lt;typeof DocumentInputSchema&gt;;

const DocumentOutputSchema = z.object({
  employeeName: z.string().describe(&quot;The full name of the employee found on the document.&quot;),
  refNumber: z.string().describe(&quot;The internal reference number of the employee (e.g., PJ-01/01).&quot;),
  isDocumentLegible: z.boolean().describe(&quot;Whether the text on the document is clear and readable.&quot;),
});
export type DocumentOutput = z.infer&lt;typeof DocumentOutputSchema&gt;;

export async function verifyDocument(input: DocumentInput): Promise&lt;DocumentOutput&gt; {
  return verifyDocumentFlow(input);
}

const prompt = ai.definePrompt({
  name: &#039;verifyDocumentPrompt&#039;,
  input: {schema: DocumentInputSchema},
  output: {schema: DocumentOutputSchema},
  prompt: `You are an expert document verifier for a company named PJ OFFICIAL.
      Your task is to analyze the provided image of an employee document.
      Extract the employee&#039;s full name and their internal reference number (it looks like &#039;PJ-XX/XX&#039;).
      If the document is blank, unclear, or not a document, set isDocumentLegible to false and return empty strings for the other fields.
      Otherwise, set isDocumentLegible to true and provide the extracted details.
      Do NOT check for seals or signatures. Only extract the text.

      Document Image: {{media url=documentImageUri}}`,
});

const verifyDocumentFlow = ai.defineFlow(
  {
    name: &#039;verifyDocumentFlow&#039;,
    inputSchema: DocumentInputSchema,
    outputSchema: DocumentOutputSchema,
  },
  async input =&gt; {
    const {output} = await prompt(input);
    return output!;
  }
);


// =========================================================================
// FILE: src/ai/genkit.ts
// =========================================================================

&#039;use server&#039;;
/**
 * @fileoverview This file initializes the Genkit AI plugin.
 */
import {googleAI} from &#039;@genkit-ai/google-genai&#039;;
import {genkit} from &#039;genkit&#039;;

genkit({
  plugins: [googleAI()],
});


// =========================================================================
// FILE: src/app/billing/history/page.tsx
// =========================================================================

&quot;use client&quot;;

import { useLocalStorage } from &#039;@/hooks/use-local-storage&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from &#039;@/components/ui/card&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import {
    AlertDialog,
    AlertDialogAction,
    AlertDialogCancel,
    AlertDialogContent,
    AlertDialogDescription,
    AlertDialogFooter,
    AlertDialogHeader,
    AlertDialogTitle,
    AlertDialogTrigger,
  } from &quot;@/components/ui/alert-dialog&quot;

type BillHistoryItem = { date: string; worker: string; total: number };

export default function BillHistoryPage() {
  const [bills, setBills] = useLocalStorage&lt;BillHistoryItem[]&gt;(&quot;pjBills&quot;, []);
  const { toast } = useToast();

  const deleteBill = (index: number) =&gt; {
    const updatedBills = [...bills];
    updatedBills.splice(index, 1);
    setBills(updatedBills);
    toast({ title: &quot;Success&quot;, description: &quot;Bill record deleted.&quot; });
  };
  
  const reversedBills = [...bills].reverse();

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
          &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Saved Bills&lt;/h2&gt;
          
          &lt;div className=&quot;grid gap-4&quot;&gt;
            {bills.length === 0 ? (
              &lt;Card&gt;
                &lt;CardContent className=&quot;p-6&quot;&gt;
                  &lt;p className=&quot;text-center text-muted-foreground&quot;&gt;No Saved Bills found.&lt;/p&gt;
                &lt;/CardContent&gt;
              &lt;/Card&gt;
            ) : (
                reversedBills.map((bill, i) =&gt; {
                    const originalIndex = bills.length - 1 - i;
                    return (
                        &lt;Card key={originalIndex} className=&quot;border-l-4 border-primary&quot;&gt;
                            &lt;CardHeader&gt;
                                &lt;CardDescription&gt;{bill.date}&lt;/CardDescription&gt;
                                &lt;CardTitle&gt;Worker: {bill.worker}&lt;/CardTitle&gt;
                            &lt;/CardHeader&gt;
                            &lt;CardContent&gt;
                                &lt;p className=&quot;text-xl font-bold text-primary&quot;&gt;Total: ₹{bill.total}&lt;/p&gt;
                            &lt;/CardContent&gt;
                            &lt;CardFooter&gt;
                            &lt;AlertDialog&gt;
                                &lt;AlertDialogTrigger asChild&gt;
                                    &lt;Button variant=&quot;destructive&quot; size=&quot;sm&quot;&gt;Delete Record&lt;/Button&gt;
                                &lt;/AlertDialogTrigger&gt;
                                &lt;AlertDialogContent&gt;
                                    &lt;AlertDialogHeader&gt;
                                    &lt;AlertDialogTitle&gt;Are you absolutely sure?&lt;/AlertDialogTitle&gt;
                                    &lt;AlertDialogDescription&gt;
                                        This action cannot be undone. This will permanently delete this bill record.
                                    &lt;/AlertDialogDescription&gt;
                                    &lt;/AlertDialogHeader&gt;
                                    &lt;AlertDialogFooter&gt;
                                    &lt;AlertDialogCancel&gt;Cancel&lt;/AlertDialogCancel&gt;
                                    &lt;AlertDialogAction onClick={() =&gt; deleteBill(originalIndex)}&gt;Delete&lt;/AlertDialogAction&gt;
                                    &lt;/AlertDialogFooter&gt;
                                &lt;/AlertDialogContent&gt;
                                &lt;/AlertDialog&gt;
                            &lt;/CardFooter&gt;
                        &lt;/Card&gt;
                    )
              })
            )}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/billing/new/page.tsx
// =========================================================================

&quot;use client&quot;;

import { useState, useRef, useEffect } from &#039;react&#039;;
import html2canvas from &#039;html2canvas&#039;;
import { useLocalStorage } from &#039;@/hooks/use-local-storage&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardFooter, CardHeader, CardTitle } from &#039;@/components/ui/card&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { Label } from &#039;@/components/ui/label&#039;;
import { getPolishRate } from &#039;@/lib/utils&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { PlaceHolderImages } from &#039;@/lib/placeholder-images&#039;;
import { PlusIcon, Trash2 } from &#039;lucide-react&#039;;

interface BillItem {
  id: number;
  qty: number;
  inch: number;
  rate: number;
}
type BillHistoryItem = { date: string; worker: string; total: number };

const billWatermark = PlaceHolderImages.find(img =&gt; img.id === &#039;bill-watermark&#039;);
const companyLogo = PlaceHolderImages.find(img =&gt; img.id === &#039;company-logo&#039;);

export default function BillGeneratorPage() {
  const billRef = useRef&lt;HTMLDivElement&gt;(null);
  const { toast } = useToast();
  const [worker, setWorker] = useState(&#039;&#039;);
  const [billItems, setBillItems] = useState&lt;BillItem[]&gt;([]);
  const [total, setTotal] = useState(0);
  const [billDate, setBillDate] = useState(&#039;&#039;);
  const [billId, setBillId] = useState(&#039;&#039;);
  const [bills, setBills] = useLocalStorage&lt;BillHistoryItem[]&gt;(&quot;pjBills&quot;, []);

  useEffect(() =&gt; {
    setBillDate(new Date().toLocaleDateString());
    setBillId(String(Math.floor(1000 + Math.random() * 9000)));
  }, []);

  useEffect(() =&gt; {
    const newTotal = billItems.reduce((acc, item) =&gt; acc + (item.qty * item.rate), 0);
    setTotal(newTotal);
  }, [billItems]);

  const addBillRow = () =&gt; {
    setBillItems(prev =&gt; [...prev, { id: Date.now(), qty: 1, inch: 0, rate: 0 }]);
  };

  const updateItem = (id: number, field: &#039;qty&#039; | &#039;inch&#039;, value: number) =&gt; {
    setBillItems(prev =&gt; prev.map(item =&gt; {
      if (item.id === id) {
        const newItem = { ...item, [field]: value };
        if (field === &#039;inch&#039;) {
          newItem.rate = getPolishRate(value);
        }
        return newItem;
      }
      return item;
    }));
  };
  
  const removeItem = (id: number) =&gt; {
    setBillItems(prev =&gt; prev.filter(item =&gt; item.id !== id));
  }

  const downloadBill = () =&gt; {
    if (total === 0) {
      toast({ variant: &#039;destructive&#039;, title: &quot;Cannot save empty bill&quot;, description: &quot;Please add items first.&quot; });
      return;
    }
    if (!billRef.current) return;

    const billElement = billRef.current;
    const buttonsToHide = billElement.querySelectorAll(&#039;.delete-button&#039;);
    buttonsToHide.forEach(btn =&gt; (btn as HTMLElement).style.visibility = &#039;hidden&#039;);


    html2canvas(billElement, { 
        scale: 2, 
        backgroundColor: &#039;#ffffff&#039;,
        useCORS: true,
    }).then(canvas =&gt; {
      buttonsToHide.forEach(btn =&gt; (btn as HTMLElement).style.visibility = &#039;visible&#039;);
      const link = document.createElement(&quot;a&quot;);
      link.download = `PJ-Official-Bill-${Date.now()}.png`;
      link.href = canvas.toDataURL(&quot;image/png&quot;);
      link.click();

      // Save to history
      const newBill: BillHistoryItem = {
        date: new Date().toLocaleString(),
        worker: worker || &quot;General&quot;,
        total: total
      };
      setBills([...bills, newBill]);

      toast({ title: &quot;Success!&quot;, description: &quot;Bill downloaded and saved to history.&quot; });
      
      // Reset form
      setWorker(&#039;&#039;);
      setBillItems([]);
    });
  };

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
          &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Polish Bill Generator&lt;/h2&gt;
          
          &lt;div ref={billRef} className=&quot;bg-white text-black p-5 rounded-lg shadow-lg relative overflow-hidden&quot;&gt;
            {billWatermark &amp;&amp; (
              &lt;div
                className=&quot;absolute inset-0 bg-contain bg-center bg-no-repeat opacity-50&quot;
                style={{ backgroundImage: `url(${billWatermark.imageUrl})` }}
              &gt;&lt;/div&gt;
            )}
            &lt;div className=&quot;relative z-10&quot;&gt;
            &lt;div className=&quot;flex justify-between items-start mb-4&quot;&gt;
                &lt;div className=&quot;flex items-center gap-3&quot;&gt;
                    {companyLogo &amp;&amp; (
                      &lt;img
                        src={companyLogo.imageUrl}
                        alt=&quot;Company Logo&quot;
                        width={40}
                        height={40}
                        className=&quot;rounded-full&quot;
                        crossOrigin=&quot;anonymous&quot;
                      /&gt;
                    )}
                    &lt;div&gt;
                        &lt;h3 className=&quot;text-lg font-bold tracking-wider&quot;&gt;PJ OFFICIAL BILL&lt;/h3&gt;
                        &lt;p className=&quot;text-xs opacity-70 -mt-1&quot;&gt;Official Polish Service Receipt&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;text-right text-xs&quot;&gt;
                    &lt;p&gt;Date: {billDate}&lt;/p&gt;
                    &lt;p&gt;Worker ID: #{billId}&lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;
              
              &lt;Input 
                value={worker}
                onChange={(e) =&gt; setWorker(e.target.value)}
                placeholder=&quot;Enter Worker Name&quot;
                className=&quot;my-2 bg-white text-black border-gray-300&quot; 
              /&gt;
              
              &lt;div id=&quot;billItems&quot; className=&quot;space-y-2 mt-4&quot;&gt;
                {billItems.map(item =&gt; (
                    &lt;div key={item.id} className=&quot;billRow flex items-center gap-2 p-2 bg-gray-50 rounded-md border-l-4 border-primary&quot;&gt;
                        &lt;Input type=&quot;number&quot; value={item.qty} onChange={e =&gt; updateItem(item.id, &#039;qty&#039;, parseInt(e.target.value) || 0)} className=&quot;w-16 h-8 bg-white text-black border-gray-300&quot; placeholder=&quot;Qty&quot; /&gt;
                        &lt;Input type=&quot;number&quot; value={item.inch || &#039;&#039;} onChange={e =&gt; updateItem(item.id, &#039;inch&#039;, parseInt(e.target.value) || 0)} className=&quot;w-20 h-8 bg-white text-black border-gray-300&quot; placeholder=&quot;Inch&quot; /&gt;
                        &lt;span className=&quot;flex-1 text-sm&quot;&gt;Rate: ₹{item.rate}&lt;/span&gt;
                        &lt;Button variant=&quot;ghost&quot; size=&quot;icon&quot; className=&quot;h-8 w-8 text-destructive delete-button&quot; onClick={() =&gt; removeItem(item.id)}&gt;
                            &lt;Trash2 className=&quot;h-4 w-4&quot; /&gt;
                        &lt;/Button&gt;
                    &lt;/div&gt;
                ))}
              &lt;/div&gt;

              &lt;div className=&quot;mt-5 text-right font-bold text-xl border-t-2 border-black pt-2&quot;&gt;
                Total Amount: ₹{total}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

          &lt;Button onClick={addBillRow} variant=&quot;secondary&quot; className=&quot;w-full&quot;&gt;
            &lt;PlusIcon className=&quot;mr-2 h-4 w-4&quot; /&gt; Add New Flute
          &lt;/Button&gt;
          &lt;Button onClick={downloadBill} className=&quot;w-full font-bold uppercase&quot;&gt;Download &amp; Save to History&lt;/Button&gt;

        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/employee-document/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardFooter, CardHeader } from &#039;@/components/ui/card&#039;;
import { PlaceHolderImages } from &#039;@/lib/placeholder-images&#039;;
import { Download } from &#039;lucide-react&#039;;
import Image from &#039;next/image&#039;;
import Link from &#039;next/link&#039;;

const employeeDocImage = PlaceHolderImages.find(img =&gt; img.id === &#039;employee-document&#039;);

export default function EmployeeDocumentPage() {
    return (
        &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
          &lt;AppHeader /&gt;
          &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
            &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
                &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Employee Document&lt;/h2&gt;
                {employeeDocImage ? (
                    &lt;Card&gt;
                        &lt;CardContent className=&quot;p-4&quot;&gt;
                            &lt;Image
                                src={employeeDocImage.imageUrl}
                                alt=&quot;Employee Document&quot;
                                width={600}
                                height={800}
                                className=&quot;rounded-lg border border-border shadow-md w-full h-auto&quot;
                                data-ai-hint={employeeDocImage.imageHint}
                            /&gt;
                        &lt;/CardContent&gt;
                        &lt;CardFooter&gt;
                            &lt;Button asChild className=&quot;w-full font-bold&quot;&gt;
                                &lt;Link href={employeeDocImage.imageUrl} download target=&quot;_blank&quot;&gt;
                                    &lt;Download className=&quot;mr-2 h-4 w-4&quot; /&gt;
                                    Download HD
                                &lt;/Link&gt;
                            &lt;/Button&gt;
                        &lt;/CardFooter&gt;
                    &lt;/Card&gt;
                ) : (
                    &lt;p className=&quot;text-center text-muted-foreground&quot;&gt;Image not found.&lt;/p&gt;
                )}
            &lt;/div&gt;
          &lt;/main&gt;
        &lt;/div&gt;
    );
}


// =========================================================================
// FILE: src/app/globals.css
// =========================================================================

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 28 100% 50%;
    --primary-foreground: 0 0% 0%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 108 100% 80%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 28 100% 50%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 28 100% 50%;
    --primary-foreground: 0 0% 0%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 108 100% 80%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 28 100% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    background-color: #121212;
    -webkit-tap-highlight-color: transparent;
  }
  body::before {
    content: &quot;&quot;;
    position: fixed;
    top: 50%;
    left: 50%;
    width: 300px;
    height: 300px;
    background: url(&#039;https://i.postimg.cc/0QHnqDC4/1771519114070.jpg&#039;) center/cover no-repeat;
    z-index: -1;
    pointer-events: none;
    border-radius: 50%;
    filter: grayscale(100%);
    animation: pulseWatermark 10s infinite ease-in-out;
  }
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes pulseWatermark {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.05);
    opacity: 0.12;
  }
}

.animate-slide-in {
  animation: slideIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
}


// =========================================================================
// FILE: src/app/layout.tsx
// =========================================================================

import type { Metadata } from &#039;next&#039;;
import { Poppins } from &#039;next/font/google&#039;;
import &#039;./globals.css&#039;;
import { Toaster } from &#039;@/components/ui/toaster&#039;;
import { cn } from &#039;@/lib/utils&#039;;
import FloatingApproval from &#039;@/components/shared/FloatingApproval&#039;;

const poppins = Poppins({
  subsets: [&#039;latin&#039;],
  weight: [&#039;300&#039;, &#039;400&#039;, &#039;600&#039;, &#039;700&#039;],
  variable: &#039;--font-poppins&#039;,
});

export const metadata: Metadata = {
  title: &#039;Flute Master&#039;,
  description: &#039;PJ Official Dashboard&#039;,
};

export default function RootLayout({
  children,
}: Readonly&lt;{
  children: React.ReactNode;
}&gt;) {
  return (
    &lt;html lang=&quot;en&quot; className=&quot;dark&quot;&gt;
      &lt;body className={cn(&#039;min-h-screen bg-background font-sans antialiased&#039;, poppins.variable)}&gt;
        {children}
        &lt;Toaster /&gt;
        &lt;FloatingApproval /&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  );
}


// =========================================================================
// FILE: src/app/measurements/base/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { baseMeasurements } from &#039;@/lib/data&#039;;

export default function BaseMeasurePage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Base Measurements&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {baseMeasurements.map(item =&gt; (
                    &lt;RateCard key={item.scale} label={item.scale} value={item.length} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/measurements/middle/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { middleMeasurements } from &#039;@/lib/data&#039;;

export default function MiddleMeasurePage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Middle Measurements&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {middleMeasurements.map(item =&gt; (
                    &lt;RateCard key={item.scale} label={item.scale} value={item.length} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/measurements/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import MenuButton from &#039;@/components/shared/MenuButton&#039;;

export default function MeasurePage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Flute Measurement&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                &lt;MenuButton href=&quot;/measurements/middle&quot;&gt;Middle Flutes&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/measurements/base&quot;&gt;Base Flutes&lt;/MenuButton&gt;
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/polish-calculator/page.tsx
// =========================================================================

&#039;use client&#039;;

import { useState } from &#039;react&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from &#039;@/components/ui/card&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { Label } from &#039;@/components/ui/label&#039;;
import { getPolishRate } from &#039;@/lib/utils&#039;;
import { Separator } from &#039;@/components/ui/separator&#039;;

interface ResultItem {
  length: number;
  rate: number;
}

export default function PolishCalculatorPage() {
  const [inputValue, setInputValue] = useState(&#039;&#039;);
  const [results, setResults] = useState&lt;ResultItem[]&gt;([]);
  const [total, setTotal] = useState(0);

  const calculatePolish = () =&gt; {
    const lengths = inputValue.split(/[\s,]+/).filter(x =&gt; x.trim() !== &quot;&quot;).map(Number);
    if (lengths.length === 0) {
      setResults([]);
      setTotal(0);
      return;
    }

    const newResults = lengths.map(len =&gt; ({
      length: len,
      rate: getPolishRate(len),
    }));

    const newTotal = newResults.reduce((acc, item) =&gt; acc + item.rate, 0);

    setResults(newResults);
    setTotal(newTotal);
  };

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
          &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Polish Calculator&lt;/h2&gt;
          
          &lt;Card className=&quot;bg-card/50&quot;&gt;
            &lt;CardHeader&gt;
              &lt;Label htmlFor=&quot;lengthInput&quot; className=&quot;text-sm text-muted-foreground&quot;&gt;
                Enter lengths (e.g. 18, 25, 45)
              &lt;/Label&gt;
              &lt;Input
                id=&quot;lengthInput&quot;
                type=&quot;text&quot;
                placeholder=&quot;Separated by space or comma&quot;
                value={inputValue}
                onChange={(e) =&gt; setInputValue(e.target.value)}
              /&gt;
            &lt;/CardHeader&gt;
            &lt;CardContent&gt;
              &lt;Button onClick={calculatePolish} className=&quot;w-full font-bold uppercase&quot; variant=&quot;secondary&quot;&gt;
                Calculate Total
              &lt;/Button&gt;
            &lt;/CardContent&gt;
          &lt;/Card&gt;

          {results.length &gt; 0 &amp;&amp; (
            &lt;Card&gt;
              &lt;CardHeader&gt;
                &lt;CardTitle&gt;Polish Summary&lt;/CardTitle&gt;
              &lt;/CardHeader&gt;
              &lt;CardContent className=&quot;grid gap-2 text-sm&quot;&gt;
                {results.map((item, index) =&gt; (
                  &lt;div key={index} className=&quot;flex justify-between items-center text-muted-foreground&quot;&gt;
                    &lt;span&gt;#{index + 1} ({item.length}&quot;)&lt;/span&gt;
                    &lt;span&gt;₹{item.rate}&lt;/span&gt;
                  &lt;/div&gt;
                ))}
              &lt;/CardContent&gt;
              &lt;CardFooter className=&quot;flex-col items-stretch gap-2&quot;&gt;
                &lt;Separator/&gt;
                 &lt;div className=&quot;mt-4 flex items-center justify-center rounded-md bg-primary/10 p-4 text-center text-lg font-bold text-primary&quot;&gt;
                    Total: ₹{total}
                &lt;/div&gt;
              &lt;/CardFooter&gt;
            &lt;/Card&gt;
          )}

        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/flute-rates/base/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { baseFluteRates } from &#039;@/lib/data&#039;;

export default function BaseRatesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Base Flute Rates&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {baseFluteRates.map(rate =&gt; (
                    &lt;RateCard key={rate.scale} label={rate.scale} value={`₹${rate.price}`} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/flute-rates/middle/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { middleFluteRates } from &#039;@/lib/data&#039;;

export default function MiddleRatesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Middle Flute Rates&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {middleFluteRates.map(rate =&gt; (
                    &lt;RateCard key={rate.scale} label={rate.scale} value={`₹${rate.price}`} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/flute-rates/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import MenuButton from &#039;@/components/shared/MenuButton&#039;;

export default function FluteRatesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Flutes Rate&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                &lt;MenuButton href=&quot;/products/flute-rates/middle&quot;&gt;Middle Flutes Rate&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/products/flute-rates/base&quot;&gt;Base Flutes Rate&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/products/flute-rates/sharp-middle&quot;&gt;Sharp Middle Flutes&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/products/flute-rates/sharp-base&quot;&gt;Sharp Base Flutes&lt;/MenuButton&gt;
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/flute-rates/sharp-base/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { sharpBaseRates } from &#039;@/lib/data&#039;;

export default function SharpBaseRatesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Sharp Base Rates&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {sharpBaseRates.map(rate =&gt; (
                    &lt;RateCard key={rate.scale} label={rate.scale} value={`₹${rate.price}`} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/flute-rates/sharp-middle/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { sharpMiddleRates } from &#039;@/lib/data&#039;;

export default function SharpMiddleRatesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Sharp Middle Rates&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {sharpMiddleRates.map(rate =&gt; (
                    &lt;RateCard key={rate.scale} label={rate.scale} value={`₹${rate.price}`} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import MenuButton from &#039;@/components/shared/MenuButton&#039;;

export default function ProductPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Product Details &amp; Rate&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                &lt;MenuButton href=&quot;/products/flute-rates&quot;&gt;Flutes Rate&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/products/polish-rates&quot;&gt;Polishing Rate List&lt;/MenuButton&gt;
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/products/polish-rates/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import RateCard from &#039;@/components/shared/RateCard&#039;;
import { polishingRates } from &#039;@/lib/data&#039;;

export default function PolishRatesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Polishing Rates&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                {polishingRates.map(rate =&gt; (
                    &lt;RateCard key={rate.range} label={rate.range} value={`₹${rate.price}`} /&gt;
                ))}
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/verify-watermark/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import WatermarkVerifier from &#039;@/components/watermark/WatermarkVerifier&#039;;

export default function VerifyWatermarkPage() {
    return (
        &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
            &lt;AppHeader /&gt;
            &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
                &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
                    &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Document Authenticator&lt;/h2&gt;
                    &lt;WatermarkVerifier /&gt;
                &lt;/div&gt;
            &lt;/main&gt;
        &lt;/div&gt;
    );
}


// =========================================================================
// FILE: src/components/auth/PasswordDialog.tsx
// =========================================================================

&quot;use client&quot;;

import { useState, type ReactElement } from &#039;react&#039;;
import { useRouter } from &#039;next/navigation&#039;;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
  DialogTrigger,
} from &#039;@/components/ui/dialog&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { Label } from &#039;../ui/label&#039;;

const CORRECT_PASSWORD = &quot;PJ-ECC dashboard*432Hz&quot;;

interface PasswordDialogProps {
  trigger: ReactElement;
  targetPath?: string;
}

export default function PasswordDialog({ trigger, targetPath = &#039;/cii&#039; }: PasswordDialogProps) {
  const [open, setOpen] = useState(false);
  const [password, setPassword] = useState(&#039;&#039;);
  const router = useRouter();
  const { toast } = useToast();

  const handlePasswordCheck = () =&gt; {
    if (password === CORRECT_PASSWORD) {
      toast({ title: &quot;Access Granted&quot;, description: &quot;Redirecting...&quot; });
      router.push(targetPath);
      setOpen(false);
      setPassword(&#039;&#039;);
    } else {
      toast({
        variant: &#039;destructive&#039;,
        title: &quot;Access Denied&quot;,
        description: &quot;The password you entered is incorrect.&quot;,
      });
    }
  };

  const handleKeyPress = (event: React.KeyboardEvent&lt;HTMLInputElement&gt;) =&gt; {
    if (event.key === &#039;Enter&#039;) {
      handlePasswordCheck();
    }
  };

  return (
    &lt;Dialog open={open} onOpenChange={setOpen}&gt;
      &lt;DialogTrigger asChild&gt;{trigger}&lt;/DialogTrigger&gt;
      &lt;DialogContent className=&quot;sm:max-w-[425px]&quot;&gt;
        &lt;DialogHeader&gt;
          &lt;DialogTitle&gt;Secure Access&lt;/DialogTitle&gt;
          &lt;DialogDescription&gt;
            This section is password protected. Please enter the password to continue.
          &lt;/DialogDescription&gt;
        &lt;/DialogHeader&gt;
        &lt;div className=&quot;grid gap-4 py-4&quot;&gt;
          &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
            &lt;Label htmlFor=&quot;password-input&quot; className=&quot;text-right&quot;&gt;
              Password
            &lt;/Label&gt;
            &lt;Input
              id=&quot;password-input&quot;
              type=&quot;password&quot;
              value={password}
              onChange={(e) =&gt; setPassword(e.target.value)}
              onKeyDown={handleKeyPress}
              className=&quot;col-span-3&quot;
              autoFocus
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;DialogFooter&gt;
          &lt;Button onClick={handlePasswordCheck}&gt;Unlock&lt;/Button&gt;
        &lt;/DialogFooter&gt;
      &lt;/DialogContent&gt;
    &lt;/Dialog&gt;
  );
}


// =========================================================================
// FILE: src/components/cii/AddEmployeeForm.tsx
// =========================================================================

&quot;use client&quot;;

import { zodResolver } from &quot;@hookform/resolvers/zod&quot;;
import { useForm } from &quot;react-hook-form&quot;;
import { z } from &quot;zod&quot;;
import { format } from &quot;date-fns&quot;;
import React from &quot;react&quot;;

import { Button } from &quot;@/components/ui/button&quot;;
import { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from &quot;@/components/ui/form&quot;;
import { Input } from &quot;@/components/ui/input&quot;;
import { Popover, PopoverContent, PopoverTrigger } from &quot;@/components/ui/popover&quot;;
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from &quot;@/components/ui/select&quot;;
import { Calendar } from &quot;@/components/ui/calendar&quot;;
import { cn } from &quot;@/lib/utils&quot;;
import { CalendarIcon } from &quot;lucide-react&quot;;
import { useEmployees } from &quot;@/hooks/use-employees&quot;;
import { useToast } from &quot;@/hooks/use-toast&quot;;

const formSchema = z.object({
  name: z.string().min(2, { message: &quot;Name must be at least 2 characters.&quot; }),
  address: z.string().min(5, { message: &quot;Address must be at least 5 characters.&quot; }),
  refNumber: z.string().min(3, { message: &quot;Please select a reference number.&quot; }),
  gender: z.enum([&quot;Male&quot;, &quot;Female&quot;, &quot;Other&quot;], {
    required_error: &quot;Please select a gender.&quot;,
  }),
  joinDate: z.date({
    required_error: &quot;A date of joining is required.&quot;,
  }),
});

type FormData = z.infer&lt;typeof formSchema&gt;;

interface AddEmployeeFormProps {
    onFinished: () =&gt; void;
}

export default function AddEmployeeForm({ onFinished }: AddEmployeeFormProps) {
  const { employees, addEmployee } = useEmployees();
  const { toast } = useToast();

  const allRefNumbers = React.useMemo(() =&gt; {
    return Array.from({ length: 20 }, (_, i) =&gt; `PJ-01/${String(i + 1).padStart(2, &#039;0&#039;)}`);
  }, []);

  const availableRefNumbers = React.useMemo(() =&gt; {
    const usedRefNumbers = new Set(employees.map(emp =&gt; emp.refNumber));
    return allRefNumbers.filter(ref =&gt; !usedRefNumbers.has(ref));
  }, [employees, allRefNumbers]);

  const form = useForm&lt;FormData&gt;({
    resolver: zodResolver(formSchema),
    defaultValues: {
      name: &quot;&quot;,
      address: &quot;&quot;,
      refNumber: &quot;&quot;,
    },
  });

  function onSubmit(data: FormData) {
    addEmployee({
        ...data,
        joinDate: format(data.joinDate, &#039;PPP&#039;)
    });
    toast({
        title: &quot;Employee Added&quot;,
        description: `${data.name} has been added to the records.`,
    });
    onFinished();
  }

  return (
    &lt;Form {...form}&gt;
      &lt;form onSubmit={form.handleSubmit(onSubmit)} className=&quot;space-y-4 py-4&quot;&gt;
        &lt;FormField
          control={form.control}
          name=&quot;name&quot;
          render={({ field }) =&gt; (
            &lt;FormItem&gt;
              &lt;FormLabel&gt;Employee Name&lt;/FormLabel&gt;
              &lt;FormControl&gt;
                &lt;Input placeholder=&quot;Enter full name&quot; {...field} /&gt;
              &lt;/FormControl&gt;
              &lt;FormMessage /&gt;
            &lt;/FormItem&gt;
          )}
        /&gt;
        &lt;FormField
          control={form.control}
          name=&quot;address&quot;
          render={({ field }) =&gt; (
            &lt;FormItem&gt;
              &lt;FormLabel&gt;Address&lt;/FormLabel&gt;
              &lt;FormControl&gt;
                &lt;Input placeholder=&quot;Enter full address&quot; {...field} /&gt;
              &lt;/FormControl&gt;
              &lt;FormMessage /&gt;
            &lt;/FormItem&gt;
          )}
        /&gt;
        &lt;FormField
          control={form.control}
          name=&quot;refNumber&quot;
          render={({ field }) =&gt; (
            &lt;FormItem&gt;
              &lt;FormLabel&gt;Internal Reference Number&lt;/FormLabel&gt;
              &lt;Select onValueChange={field.onChange} defaultValue={field.value}&gt;
                &lt;FormControl&gt;
                  &lt;SelectTrigger&gt;
                    &lt;SelectValue placeholder=&quot;Select a reference number&quot; /&gt;
                  &lt;/SelectTrigger&gt;
                &lt;/FormControl&gt;
                &lt;SelectContent&gt;
                  {availableRefNumbers.length &gt; 0 ? (
                    availableRefNumbers.map(ref =&gt; (
                      &lt;SelectItem key={ref} value={ref}&gt;{ref}&lt;/SelectItem&gt;
                    ))
                  ) : (
                    &lt;div className=&quot;p-2 text-center text-sm text-muted-foreground&quot;&gt;No numbers available&lt;/div&gt;
                  )}
                &lt;/SelectContent&gt;
              &lt;/Select&gt;
              &lt;FormMessage /&gt;
            &lt;/FormItem&gt;
          )}
        /&gt;
        &lt;div className=&quot;grid grid-cols-2 gap-4&quot;&gt;
            &lt;FormField
            control={form.control}
            name=&quot;gender&quot;
            render={({ field }) =&gt; (
                &lt;FormItem&gt;
                &lt;FormLabel&gt;Gender&lt;/FormLabel&gt;
                &lt;Select onValueChange={field.onChange} defaultValue={field.value}&gt;
                    &lt;FormControl&gt;
                    &lt;SelectTrigger&gt;
                        &lt;SelectValue placeholder=&quot;Select gender&quot; /&gt;
                    &lt;/SelectTrigger&gt;
                    &lt;/FormControl&gt;
                    &lt;SelectContent&gt;
                    &lt;SelectItem value=&quot;Male&quot;&gt;Male&lt;/SelectItem&gt;
                    &lt;SelectItem value=&quot;Female&quot;&gt;Female&lt;/SelectItem&gt;
                    &lt;SelectItem value=&quot;Other&quot;&gt;Other&lt;/SelectItem&gt;
                    &lt;/SelectContent&gt;
                &lt;/Select&gt;
                &lt;FormMessage /&gt;
                &lt;/FormItem&gt;
            )}
            /&gt;
            &lt;FormField
            control={form.control}
            name=&quot;joinDate&quot;
            render={({ field }) =&gt; (
                &lt;FormItem className=&quot;flex flex-col pt-2&quot;&gt;
                &lt;FormLabel className=&quot;mb-[6px]&quot;&gt;Date of joining&lt;/FormLabel&gt;
                &lt;Popover&gt;
                    &lt;PopoverTrigger asChild&gt;
                    &lt;FormControl&gt;
                        &lt;Button
                        variant={&quot;outline&quot;}
                        className={cn(
                            &quot;pl-3 text-left font-normal&quot;,
                            !field.value &amp;&amp; &quot;text-muted-foreground&quot;
                        )}
                        &gt;
                        {field.value ? (
                            format(field.value, &quot;PPP&quot;)
                        ) : (
                            &lt;span&gt;Pick a date&lt;/span&gt;
                        )}
                        &lt;CalendarIcon className=&quot;ml-auto h-4 w-4 opacity-50&quot; /&gt;
                        &lt;/Button&gt;
                    &lt;/FormControl&gt;
                    &lt;/PopoverTrigger&gt;
                    &lt;PopoverContent className=&quot;w-auto p-0&quot; align=&quot;start&quot;&gt;
                    &lt;Calendar
                        mode=&quot;single&quot;
                        selected={field.value}
                        onSelect={field.onChange}
                        disabled={(date) =&gt;
                        date &gt; new Date() || date &lt; new Date(&quot;1900-01-01&quot;)
                        }
                        initialFocus
                    /&gt;
                    &lt;/PopoverContent&gt;
                &lt;/Popover&gt;
                &lt;FormMessage /&gt;
                &lt;/FormItem&gt;
            )}
            /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex justify-end gap-2 pt-4&quot;&gt;
            &lt;Button type=&quot;button&quot; variant=&quot;ghost&quot; onClick={onFinished}&gt;Cancel&lt;/Button&gt;
            &lt;Button type=&quot;submit&quot;&gt;Save Employee&lt;/Button&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/Form&gt;
  );
}


// =========================================================================
// FILE: src/components/quality/ProcessingInfo.tsx
// =========================================================================

&quot;use client&quot;;

import { useState } from &#039;react&#039;;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;;
import { Button } from &quot;@/components/ui/button&quot;;
import { LockIcon, UnlockIcon } from &#039;lucide-react&#039;;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
  DialogTrigger,
} from &#039;@/components/ui/dialog&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { Label } from &#039;@/components/ui/label&#039;;

const CORRECT_PASSWORD = &quot;sonu@jeet&quot;;

const processingSteps = [
    { 
        step: 1, 
        english: &quot;The freshly cut bamboo is stored for 4-5 days.&quot;,
        hindi: &quot;ताज़े कटे हुए बांस को 4-5 दिनों के लिए संग्रहीत किया जाता है।&quot;
    },
    { 
        step: 2, 
        english: &quot;On the 5th or 6th day, the bamboo is moved to a shady area to dry completely.&quot;,
        hindi: &quot;5वें या 6वें दिन, बांस को पूरी तरह से सूखने के लिए छायादार क्षेत्र में ले जाया जाता है।&quot;
    },
    { 
        step: 3, 
        english: &quot;After a few days of drying, the bamboo is polished with paper. Oil is then applied thoroughly, both inside and out.&quot;,
        hindi: &quot;कुछ दिनों तक सुखाने के बाद, बांस को कागज से पॉलिश किया जाता है। फिर अंदर और बाहर दोनों तरफ अच्छी तरह से तेल लगाया जाता है।&quot;
    },
    { 
        step: 4, 
        english: &quot;The oil-treated bamboo is left to cure for 5 days.&quot;,
        hindi: &quot;तेल लगे बांस को 5 दिनों के लिए ठीक होने के लिए छोड़ दिया जाता है।&quot;
    },
    { 
        step: 5, 
        english: &quot;After 5 days, oil is reapplied. The bamboo is then placed in the morning sun from 7-8 AM until 10 AM.&quot;,
        hindi: &quot;5 दिनों के बाद, तेल फिर से लगाया जाता है। फिर बांस को सुबह 7-8 बजे से सुबह 10 बजे तक सुबह की धूप में रखा जाता है।&quot;
    },
    { 
        step: 6, 
        english: &quot;It&#039;s brought inside, and then taken out again around 3:30-4:00 PM and left in an open area overnight under the sky.&quot;,
        hindi: &quot;इसे अंदर लाया जाता है, और फिर लगभग 3:30-4:00 बजे फिर से बाहर निकाला जाता है और रात भर खुले क्षेत्र में आकाश के नीचे छोड़ दिया जाता है।&quot;
    },
    { 
        step: 7, 
        english: &quot;The next morning at 10 AM, it is brought back into the shade.&quot;,
        hindi: &quot;अगली सुबह 10 बजे, इसे वापस छांव में लाया जाता है।&quot;
    },
    { 
        step: 8, 
        english: &quot;This process of sun exposure (7 AM to 10 AM) is repeated daily for 5 more days.&quot;,
        hindi: &quot;यह धूप में रखने की प्रक्रिया (सुबह 7 बजे से 10 बजे तक) 5 और दिनों के लिए रोजाना दोहराई जाती है।&quot;
    },
    { 
        step: 9, 
        english: &quot;On the 6th day, the bamboo is finally ready for scale marking and hole drilling to be crafted into a flute.&quot;,
        hindi: &quot;6वें दिन, बांस अंत में स्केल मार्किंग और छेद ड्रिलिंग के लिए तैयार होता है ताकि इसे बांसुरी में बनाया जा सके।&quot;
    },
    {
        step: 10,
        english: &quot;Orange and black color threading will be done, then company branding, after which the flute is ready.&quot;,
        hindi: &quot;नारंगी और काले रंग की थ्रेडिंग की जाएगी, फिर कंपनी की ब्रांडिंग होगी, जिसके बाद बांसुरी तैयार हो जाती है।&quot;
    }
];


export default function ProcessingInfo() {
  const [unlocked, setUnlocked] = useState(false);
  const [open, setOpen] = useState(false);
  const [password, setPassword] = useState(&#039;&#039;);
  const { toast } = useToast();

  const handlePasswordCheck = () =&gt; {
    if (password === CORRECT_PASSWORD) {
      toast({ title: &quot;Access Granted&quot;, description: &quot;Viewing processing details.&quot; });
      setUnlocked(true);
      setOpen(false);
      setPassword(&#039;&#039;);
    } else {
      toast({
        variant: &#039;destructive&#039;,
        title: &quot;Access Denied&quot;,
        description: &quot;The password you entered is incorrect.&quot;,
      });
    }
  };
  
  const handleKeyPress = (event: React.KeyboardEvent&lt;HTMLInputElement&gt;) =&gt; {
    if (event.key === &#039;Enter&#039;) {
      handlePasswordCheck();
    }
  };

  if (unlocked) {
    return (
        &lt;Card className=&quot;border-accent&quot;&gt;
            &lt;CardHeader&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                    &lt;UnlockIcon className=&quot;text-accent&quot; /&gt;
                    &lt;CardTitle className=&quot;text-accent&quot;&gt;Bamboo Processing Details&lt;/CardTitle&gt;
                &lt;/div&gt;
                &lt;CardDescription&gt;
                    This is the proprietary process for treating our premium bamboo.
                &lt;/CardDescription&gt;
            &lt;/CardHeader&gt;
            &lt;CardContent&gt;
                &lt;div className=&quot;space-y-6&quot;&gt;
                    {processingSteps.map((item) =&gt; (
                        &lt;div key={item.step} className=&quot;flex gap-4&quot;&gt;
                            &lt;div className=&quot;flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-primary/10 text-primary font-bold&quot;&gt;
                                {item.step}
                            &lt;/div&gt;
                            &lt;div className=&quot;flex-grow&quot;&gt;
                                &lt;div&gt;
                                    &lt;h4 className=&quot;font-semibold text-base text-foreground&quot;&gt;English&lt;/h4&gt;
                                    &lt;p className=&quot;text-muted-foreground text-sm mt-1&quot;&gt;{item.english}&lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div className=&quot;mt-2&quot;&gt;
                                    &lt;h4 className=&quot;font-semibold text-base text-foreground&quot;&gt;Hindi (हिन्दी)&lt;/h4&gt;
                                    &lt;p className=&quot;text-muted-foreground text-sm mt-1&quot;&gt;{item.hindi}&lt;/p&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    ))}
                &lt;/div&gt;
            &lt;/CardContent&gt;
        &lt;/Card&gt;
    );
  }

  return (
    &lt;Dialog open={open} onOpenChange={setOpen}&gt;
      &lt;DialogTrigger asChild&gt;
        &lt;Card className=&quot;cursor-pointer hover:border-primary transition-colors&quot;&gt;
            &lt;CardHeader&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                    &lt;LockIcon className=&quot;text-primary&quot;/&gt;
                    &lt;CardTitle&gt;Processing Option&lt;/CardTitle&gt;
                &lt;/div&gt;
                &lt;CardDescription&gt;
                    This section is confidential. Access is restricted to the Owner and CEO only.
                &lt;/CardDescription&gt;
            &lt;/CardHeader&gt;
        &lt;/Card&gt;
      &lt;/DialogTrigger&gt;
      &lt;DialogContent className=&quot;sm:max-w-[425px]&quot;&gt;
        &lt;DialogHeader&gt;
          &lt;DialogTitle&gt;Secure Access&lt;/DialogTitle&gt;
          &lt;DialogDescription&gt;
            This section is password protected. Enter password to view details.
          &lt;/DialogDescription&gt;
        &lt;/DialogHeader&gt;
        &lt;div className=&quot;grid gap-4 py-4&quot;&gt;
          &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
            &lt;Label htmlFor=&quot;password-input&quot; className=&quot;text-right&quot;&gt;
              Password
            &lt;/Label&gt;
            &lt;Input
              id=&quot;password-input&quot;
              type=&quot;password&quot;
              value={password}
              onChange={(e) =&gt; setPassword(e.target.value)}
              onKeyDown={handleKeyPress}
              className=&quot;col-span-3&quot;
              autoFocus
            /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;DialogFooter&gt;
          &lt;Button onClick={handlePasswordCheck}&gt;Unlock&lt;/Button&gt;
        &lt;/DialogFooter&gt;
      &lt;/DialogContent&gt;
    &lt;/Dialog&gt;
  );
}


// =========================================================================
// FILE: src/components/shared/AppHeader.tsx
// =========================================================================

&quot;use client&quot;;

import { usePathname, useRouter } from &#039;next/navigation&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { ArrowLeft } from &#039;lucide-react&#039;;

export default function AppHeader() {
  const pathname = usePathname();
  const router = useRouter();
  const isHomePage = pathname === &#039;/&#039;;

  return (
    &lt;header className=&quot;sticky top-0 z-30 flex h-16 items-center gap-4 border-b bg-background/80 px-4 backdrop-blur-sm sm:px-6&quot;&gt;
      {!isHomePage &amp;&amp; (
        &lt;Button variant=&quot;ghost&quot; size=&quot;icon&quot; onClick={() =&gt; router.back()} className=&quot;h-8 w-8 text-primary&quot;&gt;
          &lt;ArrowLeft className=&quot;h-5 w-5&quot; /&gt;
          &lt;span className=&quot;sr-only&quot;&gt;Back&lt;/span&gt;
        &lt;/Button&gt;
      )}
      &lt;div className=&quot;flex-1&quot;&gt;
        &lt;h1 className={`text-2xl font-bold tracking-wider bg-gradient-to-r from-primary via-orange-400 to-yellow-500 bg-clip-text text-transparent ${isHomePage ? &#039;text-center&#039; : &#039;&#039;}`}&gt;
          PJ Official Dashboard
        &lt;/h1&gt;
      &lt;/div&gt;
      {!isHomePage &amp;&amp; &lt;div className=&quot;w-8&quot;&gt;&lt;/div&gt;}
    &lt;/header&gt;
  );
}


// =========================================================================
// FILE: src/components/shared/FloatingApproval.tsx
// =========================================================================

&quot;use client&quot;

import { PlaceHolderImages } from &quot;@/lib/placeholder-images&quot;;
import Image from &quot;next/image&quot;;

// Get the specific images needed for the animation
const approvalImg1 = PlaceHolderImages.find(img =&gt; img.id === &#039;approval-1&#039;);
const approvalImg2 = PlaceHolderImages.find(img =&gt; img.id === &#039;approval-2&#039;);
const approvalImg5 = PlaceHolderImages.find(img =&gt; img.id === &#039;approval-5&#039;);

export default function FloatingApproval() {
    return (
        &lt;&gt;
            &lt;style jsx&gt;{`
                .float-box {
                    position: fixed;
                    bottom: 40px;
                    right: 20px;
                    width: 100px;
                    height: 120px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: flex-start;
                    z-index: 1000;
                    pointer-events: none;
                }

                .float-box .circle {
                    position: absolute;
                    top: 0;
                    width: 65px;
                    height: 65px;
                    border-radius: 50%; 
                    border: 2px solid hsl(var(--primary));
                    overflow: hidden;
                    background: #000;
                    opacity: 0;
                    animation: slide 12s infinite;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .float-box .circle img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    object-position: center;
                    display: block;
                }

                .float-box .circle:nth-child(1) { animation-delay: 0s; }
                .float-box .circle:nth-child(2) { animation-delay: 4s; }
                .float-box .circle:nth-child(3) { animation-delay: 8s; }

                @keyframes slide {
                    0% { right: -120px; opacity: 0; transform: scale(0.6); } 
                    5% { right: 18px; opacity: 1; transform: scale(1); }      
                    15% { right: 18px; opacity: 1; transform: scale(1); }      
                    20% { right: -120px; opacity: 0; transform: scale(0.6); }
                    100% { right: -120px; opacity: 0; }
                }

                .approval-text {
                    position: absolute;
                    bottom: 10px;
                    width: 100%;
                    font-size: 8px;
                    color: hsl(var(--muted-foreground));
                    text-align: center;
                    font-family: &#039;Poppins&#039;, sans-serif;
                    text-transform: uppercase;
                    letter-spacing: 0.8px;
                    font-weight: 600;
                }
            `}&lt;/style&gt;
            
            &lt;div className=&quot;float-box&quot;&gt;
                {approvalImg1 &amp;&amp; (
                    &lt;div className=&quot;circle&quot;&gt;
                        &lt;Image src={approvalImg1.imageUrl} alt=&quot;Sign&quot; width={65} height={65} /&gt;
                    &lt;/div&gt;
                )}
                {approvalImg2 &amp;&amp; (
                    &lt;div className=&quot;circle&quot;&gt;
                        &lt;Image src={approvalImg2.imageUrl} alt=&quot;Logo&quot; width={65} height={65} /&gt;
                    &lt;/div&gt;
                )}
                {approvalImg5 &amp;&amp; (
                    &lt;div className=&quot;circle&quot;&gt;
                        &lt;Image src={approvalImg5.imageUrl} alt=&quot;Seal&quot; width={65} height={65} /&gt;
                    &lt;/div&gt;
                )}
                &lt;div className=&quot;approval-text&quot;&gt;Approved By Management&lt;/div&gt;
            &lt;/div&gt;
        &lt;/&gt;
    );
}


// =========================================================================
// FILE: src/components/shared/RateCard.tsx
// =========================================================================

import { Card, CardContent } from &quot;@/components/ui/card&quot;;

interface RateCardProps {
    label: string;
    value: string | number;
}

export default function RateCard({ label, value }: RateCardProps) {
    return (
        &lt;Card className=&quot;bg-secondary/50&quot;&gt;
            &lt;CardContent className=&quot;flex items-center justify-between p-4&quot;&gt;
                &lt;span className=&quot;text-foreground/80&quot;&gt;{label}&lt;/span&gt;
                &lt;span className=&quot;font-bold text-primary&quot;&gt;{value}&lt;/span&gt;
            &lt;/CardContent&gt;
        &lt;/Card&gt;
    );
}


// =========================================================================
// FILE: src/components/watermark/WatermarkVerifier.tsx
// =========================================================================

&quot;use client&quot;;

import { useState, useRef, useEffect } from &#039;react&#039;;
import { performVerification } from &#039;@/lib/verification&#039;;
import type { VerificationOutput } from &#039;@/lib/verification&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &#039;@/components/ui/card&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { Alert, AlertDescription, AlertTitle } from &#039;@/components/ui/alert&#039;;
import { Camera, CheckCircle, FileImage, Loader2, ShieldX, XCircle } from &#039;lucide-react&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { useEmployees } from &#039;@/hooks/use-employees&#039;;

type View = &#039;choice&#039; | &#039;camera&#039; | &#039;verifying&#039; | &#039;result&#039;;

export default function WatermarkVerifier() {
  const [view, setView] = useState&lt;View&gt;(&#039;choice&#039;);
  const [result, setResult] = useState&lt;VerificationOutput | null&gt;(null);
  
  const [hasCameraPermission, setHasCameraPermission] = useState&lt;boolean | null&gt;(null);
  const videoRef = useRef&lt;HTMLVideoElement&gt;(null);
  const canvasRef = useRef&lt;HTMLCanvasElement&gt;(null);
  const fileInputRef = useRef&lt;HTMLInputElement&gt;(null);

  const { toast } = useToast();
  const { employees } = useEmployees();

  useEffect(() =&gt; {
    if (view === &#039;choice&#039;) {
      setResult(null);
    }
  }, [view]);

  useEffect(() =&gt; {
    let timer: NodeJS.Timeout;
    if (view === &#039;result&#039; &amp;&amp; (result?.verificationStatus === &#039;Blank&#039; || result?.verificationStatus === &#039;Fake&#039;)) {
      timer = setTimeout(() =&gt; {
        setView(&#039;choice&#039;);
      }, 3000);
    }
    return () =&gt; clearTimeout(timer);
  }, [view, result]);

  useEffect(() =&gt; {
    let stream: MediaStream | null = null;

    const startCamera = async () =&gt; {
        if (view === &#039;camera&#039; &amp;&amp; !stream) {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: &#039;environment&#039; } });
                setHasCameraPermission(true);
                if (videoRef.current) {
                    videoRef.current.srcObject = stream;
                }
            } catch (err) {
                console.error(&#039;Error accessing camera:&#039;, err);
                setHasCameraPermission(false);
                toast({
                    variant: &#039;destructive&#039;,
                    title: &#039;Camera Access Denied&#039;,
                    description: &#039;Please enable camera permissions in your browser settings.&#039;,
                });
                setView(&#039;choice&#039;);
            }
        }
    };
    
    startCamera();

    return () =&gt; {
      if (stream) {
        stream.getTracks().forEach(track =&gt; track.stop());
      }
    };
  }, [view, toast]);

  const handleUseCamera = () =&gt; {
    setView(&#039;camera&#039;);
  };

  const handleVerification = async (imageUri: string) =&gt; {
    setView(&#039;verifying&#039;);
    setResult(null);
    try {
      const verificationResult = await performVerification(imageUri, employees);
      setResult(verificationResult);
    } catch (e) {
      const errorMsg = e instanceof Error ? e.message : &quot;An unknown error occurred.&quot;;
      setResult({
        verificationStatus: &#039;Fake&#039;,
        analysisDetails: errorMsg
      });
    } finally {
      setView(&#039;result&#039;);
    }
  };

  const handleCapture = () =&gt; {
    if (!videoRef.current || !canvasRef.current) return;
    const video = videoRef.current;
    const canvas = canvasRef.current;
    
    // Set canvas dimensions to match video to capture full resolution
    const width = video.videoWidth;
    const height = video.videoHeight;
    canvas.width = width;
    canvas.height = height;

    const context = canvas.getContext(&#039;2d&#039;);
    if (context) {
      context.drawImage(video, 0, 0, width, height);
      const dataUri = canvas.toDataURL(&#039;image/png&#039;);
      handleVerification(dataUri);
    }
  };

  const handleFileChange = (event: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const file = event.target.files?.[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () =&gt; {
        handleVerification(reader.result as string);
      };
      reader.readAsDataURL(file);
    }
  };

  const renderContent = () =&gt; {
    switch (view) {
      case &#039;choice&#039;:
        return (
          &lt;CardContent className=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 p-6&quot;&gt;
            &lt;Button variant=&quot;outline&quot; className=&quot;h-24 text-lg&quot; onClick={handleUseCamera}&gt;
              &lt;Camera className=&quot;mr-3 h-8 w-8&quot; /&gt; Use Camera
            &lt;/Button&gt;
            &lt;Button variant=&quot;outline&quot; className=&quot;h-24 text-lg&quot; onClick={() =&gt; fileInputRef.current?.click()}&gt;
              &lt;FileImage className=&quot;mr-3 h-8 w-8&quot; /&gt; Upload from Gallery
            &lt;/Button&gt;
            &lt;Input type=&quot;file&quot; ref={fileInputRef} onChange={handleFileChange} className=&quot;hidden&quot; accept=&quot;image/*&quot; /&gt;
          &lt;/CardContent&gt;
        );

      case &#039;camera&#039;:
        return (
            &lt;CardContent className=&quot;p-4 space-y-4&quot;&gt;
                {hasCameraPermission === false &amp;&amp; (
                     &lt;Alert variant=&quot;destructive&quot;&gt;
                        &lt;XCircle className=&quot;h-4 w-4&quot; /&gt;
                        &lt;AlertTitle&gt;Camera Access Required&lt;/AlertTitle&gt;
                        &lt;AlertDescription&gt;
                            Please allow camera access. You may need to grant permission in your browser settings.
                        &lt;/AlertDescription&gt;
                    &lt;/Alert&gt;
                )}
                &lt;div className=&quot;relative w-full max-w-sm mx-auto aspect-[210/297] bg-black rounded-md overflow-hidden border&quot;&gt;
                   &lt;video ref={videoRef} className=&quot;w-full h-full object-cover&quot; autoPlay playsInline muted /&gt;
                   &lt;canvas ref={canvasRef} className=&quot;hidden&quot; /&gt;
                   &lt;div className=&quot;absolute inset-0 border-4 md:border-8 border-black/30 rounded-md box-border pointer-events-none&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex gap-2&quot;&gt;
                    &lt;Button variant=&quot;secondary&quot; onClick={() =&gt; setView(&#039;choice&#039;)} className=&quot;flex-1&quot;&gt;Back&lt;/Button&gt;
                    &lt;Button onClick={handleCapture} className=&quot;flex-1&quot; disabled={hasCameraPermission === false}&gt;
                        &lt;Camera className=&quot;mr-2 h-4 w-4&quot; /&gt; Scan Document
                    &lt;/Button&gt;
                &lt;/div&gt;
            &lt;/CardContent&gt;
        );
      
      case &#039;verifying&#039;:
        return (
          &lt;CardContent className=&quot;h-48 flex flex-col items-center justify-center p-6 gap-4&quot;&gt;
            &lt;Loader2 className=&quot;h-12 w-12 animate-spin text-primary&quot; /&gt;
            &lt;p className=&quot;text-muted-foreground&quot;&gt;Authenticating Document...&lt;/p&gt;
          &lt;/CardContent&gt;
        );

      case &#039;result&#039;:
        if (result?.verificationStatus === &#039;Approved&#039;) {
            return (
                &lt;CardContent className=&quot;p-6 space-y-4&quot;&gt;
                    &lt;div className=&quot;text-center py-8&quot;&gt;
                        &lt;CheckCircle className=&quot;mx-auto h-16 w-16 text-green-500&quot; /&gt;
                        &lt;h3 className=&quot;mt-4 text-xl font-bold text-green-500&quot;&gt;Approved&lt;/h3&gt;
                        &lt;p className=&quot;mt-2 text-muted-foreground&quot;&gt;{result.analysisDetails}&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;p className=&quot;text-xs text-green-500 text-right w-full&quot;&gt;Approved by PJ Authorisation&lt;/p&gt;
                    &lt;Button onClick={() =&gt; setView(&#039;choice&#039;)} className=&quot;w-full&quot;&gt;Verify Another&lt;/Button&gt;
                &lt;/CardContent&gt;
            );
        }
        if (result?.verificationStatus === &#039;Fake&#039;) {
            return (
                &lt;CardContent className=&quot;p-6 space-y-4&quot;&gt;
                    &lt;div className=&quot;text-center py-8&quot;&gt;
                        &lt;ShieldX className=&quot;mx-auto h-16 w-16 text-destructive&quot; /&gt;
                        &lt;h3 className=&quot;mt-4 text-xl font-bold text-destructive&quot;&gt;FAKE COPY&lt;/h3&gt;
                        &lt;p className=&quot;mt-2 text-muted-foreground&quot;&gt;{result.analysisDetails}&lt;/p&gt;
                    &lt;/div&gt;
                     &lt;p className=&quot;text-xs text-red-500 font-bold text-right w-full&quot;&gt;Unauthorised&lt;/p&gt;
                     &lt;Button onClick={() =&gt; setView(&#039;choice&#039;)} className=&quot;w-full&quot;&gt;Try Again&lt;/Button&gt;
                &lt;/CardContent&gt;
            );
        }
        if (result?.verificationStatus === &#039;Blank&#039;) {
            return (
                &lt;CardContent className=&quot;p-6 space-y-4&quot;&gt;
                    &lt;div className=&quot;text-center py-8 h-48 flex flex-col justify-center items-center&quot;&gt;
                        &lt;h3 className=&quot;text-xl font-bold text-destructive&quot;&gt;Please fill the details first&lt;/h3&gt;
                        &lt;p className=&quot;mt-2 text-muted-foreground&quot;&gt;{result.analysisDetails}&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/CardContent&gt;
            );
        }
        return null;

      default:
        return null;
    }
  }

  return (
    &lt;Card&gt;
      &lt;CardHeader&gt;
        &lt;CardTitle&gt;Document Authenticator&lt;/CardTitle&gt;
        &lt;CardDescription&gt;
            {view === &#039;choice&#039; &amp;&amp; &quot;Select a method to verify your document.&quot;}
            {view === &#039;camera&#039; &amp;&amp; &quot;Position your document within the frame and press scan.&quot;}
            {view === &#039;verifying&#039; &amp;&amp; &quot;Please wait while we analyze your document.&quot;}
            {view === &#039;result&#039; &amp;&amp; &quot;Here is your verification result.&quot;}
        &lt;/CardDescription&gt;
      &lt;/CardHeader&gt;
      {renderContent()}
    &lt;/Card&gt;
  );
}


// =========================================================================
// FILE: src/hooks/use-employees.ts
// =========================================================================

&quot;use client&quot;;
import { useLocalStorage } from &#039;@/hooks/use-local-storage&#039;;

export interface Employee {
  id: string;
  name: string;
  address: string;
  refNumber: string;
  gender?: &#039;Male&#039; | &#039;Female&#039; | &#039;Other&#039;;
  joinDate?: string;
}

const initialEmployees: Employee[] = [
  { id: &#039;pj-01-01&#039;, name: &#039;Ritesh Mali&#039;, address: &#039;N.gram, Diglipur,N.Andaman&#039;, refNumber: &#039;PJ-01/01&#039; },
  { id: &#039;pj-01-02&#039;, name: &#039;Shayan Ojha&#039;, address: &#039;N.gram, Diglipur,N.Andaman&#039;, refNumber: &#039;PJ-01/02&#039; },
  { id: &#039;pj-01-03&#039;, name: &#039;Debojit Das&#039;, address: &#039;G.nagar, Diglipur, N.Andaman&#039;, refNumber: &#039;PJ-01/03&#039; },
];

export function useEmployees() {
  const [employees, setEmployees] = useLocalStorage&lt;Employee[]&gt;(&#039;pjEmployees&#039;, initialEmployees);

  const addEmployee = (employee: Omit&lt;Employee, &#039;id&#039;&gt;) =&gt; {
    const newEmployee = { ...employee, id: `pj-emp-${Date.now()}` };
    setEmployees(prev =&gt; [...prev, newEmployee]);
  };

  return { employees, addEmployee };
}


// =========================================================================
// FILE: src/hooks/use-local-storage.ts
// =========================================================================

&quot;use client&quot;

import { useState, useEffect, Dispatch, SetStateAction } from &#039;react&#039;;

type SetValue&lt;T&gt; = Dispatch&lt;SetStateAction&lt;T&gt;&gt;;

export function useLocalStorage&lt;T&gt;(key: string, initialValue: T): [T, SetValue&lt;T&gt;] {
  const [storedValue, setStoredValue] = useState&lt;T&gt;(initialValue);

  useEffect(() =&gt; {
    if (typeof window !== &#039;undefined&#039;) {
      try {
        const item = window.localStorage.getItem(key);
        if (item) {
          setStoredValue(JSON.parse(item));
        }
      } catch (error) {
        console.error(error);
      }
    }
  }, [key]);

  useEffect(() =&gt; {
    if (typeof window !== &#039;undefined&#039;) {
      try {
        window.localStorage.setItem(key, JSON.stringify(storedValue));
      } catch (error) {
        console.error(error);
      }
    }
  }, [key, storedValue]);

  return [storedValue, setStoredValue];
}


// =========================================================================
// FILE: src/hooks/use-mobile.tsx
// =========================================================================

import * as React from &quot;react&quot;

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState&lt;boolean | undefined&gt;(undefined)

  React.useEffect(() =&gt; {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () =&gt; {
      setIsMobile(window.innerWidth &lt; MOBILE_BREAKPOINT)
    }
    mql.addEventListener(&quot;change&quot;, onChange)
    setIsMobile(window.innerWidth &lt; MOBILE_BREAKPOINT)
    return () =&gt; mql.removeEventListener(&quot;change&quot;, onChange)
  }, [])

  return !!isMobile
}


// =========================================================================
// FILE: src/hooks/use-toast.ts
// =========================================================================

&quot;use client&quot;

// Inspired by react-hot-toast library
import * as React from &quot;react&quot;

import type {
  ToastActionElement,
  ToastProps,
} from &quot;@/components/ui/toast&quot;

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps &amp; {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

const actionTypes = {
  ADD_TOAST: &quot;ADD_TOAST&quot;,
  UPDATE_TOAST: &quot;UPDATE_TOAST&quot;,
  DISMISS_TOAST: &quot;DISMISS_TOAST&quot;,
  REMOVE_TOAST: &quot;REMOVE_TOAST&quot;,
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
      type: ActionType[&quot;ADD_TOAST&quot;]
      toast: ToasterToast
    }
  | {
      type: ActionType[&quot;UPDATE_TOAST&quot;]
      toast: Partial&lt;ToasterToast&gt;
    }
  | {
      type: ActionType[&quot;DISMISS_TOAST&quot;]
      toastId?: ToasterToast[&quot;id&quot;]
    }
  | {
      type: ActionType[&quot;REMOVE_TOAST&quot;]
      toastId?: ToasterToast[&quot;id&quot;]
    }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map&lt;string, ReturnType&lt;typeof setTimeout&gt;&gt;()

const addToRemoveQueue = (toastId: string) =&gt; {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() =&gt; {
    toastTimeouts.delete(toastId)
    dispatch({
      type: &quot;REMOVE_TOAST&quot;,
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State =&gt; {
  switch (action.type) {
    case &quot;ADD_TOAST&quot;:
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case &quot;UPDATE_TOAST&quot;:
      return {
        ...state,
        toasts: state.toasts.map((t) =&gt;
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      }

    case &quot;DISMISS_TOAST&quot;: {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I&#039;ll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) =&gt; {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =&gt;
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t
        ),
      }
    }
    case &quot;REMOVE_TOAST&quot;:
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) =&gt; t.id !== action.toastId),
      }
  }
}

const listeners: Array&lt;(state: State) =&gt; void&gt; = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) =&gt; {
    listener(memoryState)
  })
}

type Toast = Omit&lt;ToasterToast, &quot;id&quot;&gt;

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =&gt;
    dispatch({
      type: &quot;UPDATE_TOAST&quot;,
      toast: { ...props, id },
    })
  const dismiss = () =&gt; dispatch({ type: &quot;DISMISS_TOAST&quot;, toastId: id })

  dispatch({
    type: &quot;ADD_TOAST&quot;,
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) =&gt; {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState&lt;State&gt;(memoryState)

  React.useEffect(() =&gt; {
    listeners.push(setState)
    return () =&gt; {
      const index = listeners.indexOf(setState)
      if (index &gt; -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) =&gt; dispatch({ type: &quot;DISMISS_TOAST&quot;, toastId }),
  }
}

export { useToast, toast }


// =========================================================================
// FILE: src/lib/data.ts
// =========================================================================

export const middleFluteRates = [
  { scale: &#039;A&#039;, price: 400 },
  { scale: &#039;B&#039;, price: 400 },
  { scale: &#039;C&#039;, price: 1500 },
  { scale: &#039;D&#039;, price: 1300 },
  { scale: &#039;E&#039;, price: 1100 },
  { scale: &#039;F&#039;, price: 700 },
  { scale: &#039;G&#039;, price: 600 },
];

export const baseFluteRates = [
  { scale: &#039;A&#039;, price: 1750 },
  { scale: &#039;B&#039;, price: 1600 },
  { scale: &#039;C&#039;, price: 2500 },
  { scale: &#039;D&#039;, price: 2200 },
  { scale: &#039;E&#039;, price: 2400 },
  { scale: &#039;F&#039;, price: 1999 },
  { scale: &#039;G&#039;, price: 1800 },
];

export const sharpMiddleRates = [
  { scale: &#039;A#&#039;, price: 500 },
  { scale: &#039;C#&#039;, price: 1470 },
  { scale: &#039;D#&#039;, price: 1150 },
  { scale: &#039;F#&#039;, price: 670 },
  { scale: &#039;G#&#039;, price: 550 },
];

export const sharpBaseRates = [
  { scale: &#039;A#&#039;, price: 1600 },
  { scale: &#039;C#&#039;, price: 2400 },
  { scale: &#039;D#&#039;, price: 2600 },
  { scale: &#039;F#&#039;, price: 1990 },
  { scale: &#039;G#&#039;, price: 1850 },
];

export const polishingRates = [
    { range: &#039;Under 16 inch&#039;, price: 20 },
    { range: &#039;16.1 – 20 inch&#039;, price: 40 },
    { range: &#039;21.5 – 26 inch&#039;, price: 45 },
    { range: &#039;27.5 – 30 inch&#039;, price: 50 },
    { range: &#039;Above 30 inch&#039;, price: 60 },
];

export const middleMeasurements = [
  { scale: &#039;C&#039;, length: &#039;19 inch&#039; },
  { scale: &#039;D&#039;, length: &#039;18.5 inch&#039; },
  { scale: &#039;D#&#039;, length: &#039;17 inch&#039; },
  { scale: &#039;E&#039;, length: &#039;16 inch&#039; },
  { scale: &#039;F&#039;, length: &#039;15 inch&#039; },
  { scale: &#039;F#&#039;, length: &#039;14 inch&#039; },
  { scale: &#039;G&#039;, length: &#039;13 inch&#039; },
  { scale: &#039;G#&#039;, length: &#039;12 inch&#039; },
  { scale: &#039;A&#039;, length: &#039;11 inch&#039; },
  { scale: &#039;A#&#039;, length: &#039;11.5 inch&#039; },
  { scale: &#039;B&#039;, length: &#039;10 inch&#039; },
];

export const baseMeasurements = [
  { scale: &#039;C&#039;, length: &#039;36 inch&#039; },
  { scale: &#039;C#&#039;, length: &#039;34 inch&#039; },
  { scale: &#039;D&#039;, length: &#039;33 inch&#039; },
  { scale: &#039;D#&#039;, length: &#039;31.5 inch&#039; },
  { scale: &#039;E&#039;, length: &#039;30 inch&#039; },
  { scale: &#039;F&#039;, length: &#039;29 inch&#039; },
  { scale: &#039;F#&#039;, length: &#039;27.5 inch&#039; },
  { scale: &#039;G&#039;, length: &#039;26 inch&#039; },
  { scale: &#039;G#&#039;, length: &#039;24.5 inch&#039; },
  { scale: &#039;A&#039;, length: &#039;23 inch&#039; },
  { scale: &#039;A#&#039;, length: &#039;21.5 inch&#039; },
  { scale: &#039;B&#039;, length: &#039;20 inch&#039; },
];

export const deletionReasons = [
    &quot;Uploaded by mistake&quot;,
    &quot;Incorrect picture&quot;,
    &quot;Quality issue&quot;,
    &quot;Duplicate entry&quot;,
    &quot;Outdated data&quot;,
    &quot;Testing purpose&quot;,
    &quot;Wrong category&quot;,
    &quot;Client request&quot;,
    &quot;Mistake by worker&quot;,
    &quot;Security reason&quot;,
    &quot;Update required&quot;,
    &quot;Not needed anymore&quot;,
    &quot;Wrong title&quot;,
    &quot;Policy violation&quot;,
    &quot;Temporary image&quot;,
    &quot;Admin&#039;s order&quot;,
    &quot;Internal error&quot;
];


// =========================================================================
// FILE: src/lib/firebaseConfig.ts
// =========================================================================

import { initializeApp, getApps } from &quot;firebase/app&quot;;
import { getFirestore } from &quot;firebase/firestore&quot;;

const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID
};

// Initialize Firebase only if it hasn&#039;t been initialized yet
const app = !getApps().length ? initializeApp(firebaseConfig) : getApps()[0];
export const db = getFirestore(app);


// =========================================================================
// FILE: src/lib/otpService.ts
// =========================================================================

import { db } from &quot;@/lib/firebaseConfig&quot;;
import { doc, setDoc, getDoc, serverTimestamp } from &quot;firebase/firestore&quot;;

// Save OTP to the database with a server-side timestamp
export const saveOTPToFirestore = async (email: string, otp: string) =&gt; {
    // By removing the try/catch, the original Firebase error will propagate
    // to the calling function, which has more UI context for better error display.
    await setDoc(doc(db, &quot;otps&quot;, email), {
        otp: otp,
        createdAt: serverTimestamp(),
    });
};

// Verify OTP from the database
export const verifyOTPFromFirestore = async (email: string, enteredOtp: string) =&gt; {
    const docRef = doc(db, &quot;otps&quot;, email);
    const docSnap = await getDoc(docRef);

    if (docSnap.exists()) {
        const data = docSnap.data();
        
        // Check if OTP is expired (5 minutes)
        if (data.createdAt) {
            const now = new Date();
            const otpTime = data.createdAt.toDate();
            const diffInMinutes = (now.getTime() - otpTime.getTime()) / 60000;
            
            if (diffInMinutes &gt; 5) {
                console.log(&quot;OTP has expired.&quot;);
                return false;
            }
        }
        
        return data.otp === enteredOtp;
    }
    return false;
};


// =========================================================================
// FILE: src/lib/placeholder-images.json
// =========================================================================

{
  &quot;placeholderImages&quot;: [
    {
      &quot;id&quot;: &quot;body-watermark&quot;,
      &quot;description&quot;: &quot;Circular greyscale watermark for body background&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/0QHnqDC4/1771519114070.jpg&quot;,
      &quot;imageHint&quot;: &quot;logo abstract&quot;
    },
    {
      &quot;id&quot;: &quot;bill-watermark&quot;,
      &quot;description&quot;: &quot;Watermark for generated bills&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/L8vWhY4Y/Screenshot-20260221-204626-Photos-and-videos.png&quot;,
      &quot;imageHint&quot;: &quot;logo official&quot;
    },
    {
      &quot;id&quot;: &quot;employee-document&quot;,
      &quot;description&quot;: &quot;Image of an employee document&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/kGn8V4gJ/Screenshot-20260221-205009-Photos-and-videos.png&quot;,
      &quot;imageHint&quot;: &quot;document paper&quot;
    },
    {
      &quot;id&quot;: &quot;owner-signature&quot;,
      &quot;description&quot;: &quot;Digital signature of the owner&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/bJHgFrC5/file-00000000005c72099d46cf69aa1ebc2c-(1).png&quot;,
      &quot;imageHint&quot;: &quot;signature script&quot;
    },
    {
      &quot;id&quot;: &quot;company-logo&quot;,
      &quot;description&quot;: &quot;The official company logo&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/W4KcbWsP/Screenshot-20260221-212958-Gallery.png&quot;,
      &quot;imageHint&quot;: &quot;logo brand&quot;
    },
    {
      &quot;id&quot;: &quot;pj-ecc-seal&quot;,
      &quot;description&quot;: &quot;The official PJ-ECC seal&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/BZRbwpF7/1771677047110.jpg&quot;,
      &quot;imageHint&quot;: &quot;seal stamp&quot;
    },
    {
      &quot;id&quot;: &quot;official-watermark&quot;,
      &quot;description&quot;: &quot;The official company watermark image&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/L8vWhY4Y/Screenshot-20260221-204626-Photos-and-videos.png&quot;,
      &quot;imageHint&quot;: &quot;logo watermark&quot;
    },
    {
      &quot;id&quot;: &quot;store-qr-code&quot;,
      &quot;description&quot;: &quot;QR code for the store&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/13kKmwbd/Screenshot-20260221-213437-Gallery.png&quot;,
      &quot;imageHint&quot;: &quot;qr code&quot;
    },
    {
      &quot;id&quot;: &quot;approval-1&quot;,
      &quot;description&quot;: &quot;Approval image 1&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/Dzfj12pF/file-00000000005c72099d46cf69aa1ebc2c.png&quot;,
      &quot;imageHint&quot;: &quot;signature official&quot;
    },
    {
      &quot;id&quot;: &quot;approval-2&quot;,
      &quot;description&quot;: &quot;Approval image 2&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/63kFrkGg/file-00000000841c71fab26ed8e9bbeff027.png&quot;,
      &quot;imageHint&quot;: &quot;document seal&quot;
    },
    {
      &quot;id&quot;: &quot;approval-3&quot;,
      &quot;description&quot;: &quot;Approval image 3&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/52rgQwvc/Screenshot-20260221-201134-Photos-and-videos.png&quot;,
      &quot;imageHint&quot;: &quot;person portrait&quot;
    },
    {
      &quot;id&quot;: &quot;approval-4&quot;,
      &quot;description&quot;: &quot;Approval image 4&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/DyqRKCRc/Screenshot-20260221-201201-Photos-and-videos.png&quot;,
      &quot;imageHint&quot;: &quot;person photo&quot;
    },
    {
      &quot;id&quot;: &quot;approval-5&quot;,
      &quot;description&quot;: &quot;Approval image 5&quot;,
      &quot;imageUrl&quot;: &quot;https://i.postimg.cc/gJmZxJgM/1771677047110.jpg&quot;,
      &quot;imageHint&quot;: &quot;stamp official&quot;
    }
  ]
}


// =========================================================================
// FILE: src/lib/placeholder-images.ts
// =========================================================================

import data from &#039;./placeholder-images.json&#039;;

export type ImagePlaceholder = {
  id: string;
  description: string;
  imageUrl: string;
  imageHint: string;
};

export const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;


// =========================================================================
// FILE: src/lib/utils.ts
// =========================================================================

import { clsx, type ClassValue } from &quot;clsx&quot;
import { twMerge } from &quot;tailwind-merge&quot;

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

export function getPolishRate(inch: number | string): number {
  const length = parseFloat(String(inch)) || 0;
  if (length &lt;= 0) return 0;
  if (length &lt; 10) return 15;
  if (length &lt;= 15.5) return 20;
  if (length &lt;= 20) return 40;
  if (length &lt;= 26) return 45;
  if (length &lt;= 30) return 50;
  if (length &gt; 30) return 60;
  return 0;
}


// =========================================================================
// FILE: src/lib/verification.ts
// =========================================================================

import { verifyDocument } from &#039;@/ai/flows/verify-document-flow&#039;;
import { type Employee } from &#039;@/hooks/use-employees&#039;;

export interface VerificationOutput {
  verificationStatus: &#039;Approved&#039; | &#039;Fake&#039; | &#039;Blank&#039;;
  analysisDetails: string;
}

// This function now calls the AI flow and then checks the results
// against the provided employee list.
export async function performVerification(imageUri: string, employees: Employee[]): Promise&lt;VerificationOutput&gt; {
  if (!imageUri || imageUri.length &lt; 2000) {
    return {
      verificationStatus: &#039;Blank&#039;,
      analysisDetails: &#039;The uploaded image is not a valid document. Please try again with a clear image.&#039;,
    };
  }

  try {
    // Step 1: Call the AI to extract text from the image.
    const aiResult = await verifyDocument({ documentImageUri: imageUri });

    if (!aiResult.isDocumentLegible || !aiResult.employeeName || !aiResult.refNumber) {
        return {
            verificationStatus: &#039;Blank&#039;,
            analysisDetails: &#039;The document is blank or unreadable. Please fill in the details first.&#039;,
        };
    }

    // Step 2: Find the employee in our records based on the reference number.
    const foundEmployee = employees.find(emp =&gt; emp.refNumber.trim().toLowerCase() === aiResult.refNumber.trim().toLowerCase());

    if (!foundEmployee) {
        return {
            verificationStatus: &#039;Fake&#039;,
            analysisDetails: `No employee found with reference number: ${aiResult.refNumber}. This document is unauthorized.`,
        };
    }

    // Step 3: Check if the name from the document matches the name in our records.
    // We use a simple .includes() check to be flexible with minor variations.
    const nameMatch = foundEmployee.name.trim().toLowerCase().includes(aiResult.employeeName.trim().toLowerCase());

    if (nameMatch) {
        return {
            verificationStatus: &#039;Approved&#039;,
            analysisDetails: `Document approved for ${foundEmployee.name}.`,
        };
    } else {
        return {
            verificationStatus: &#039;Fake&#039;,
            analysisDetails: `Details mismatch. Document shows name &quot;${aiResult.employeeName}&quot; but records for ${aiResult.refNumber} belong to &quot;${foundEmployee.name}&quot;.`,
        };
    }

  } catch (e: any) {
    console.error(&quot;Verification failed:&quot;, e);
    // This will catch errors from the AI model itself, like API issues.
    return {
      verificationStatus: &#039;Fake&#039;,
      analysisDetails: `Verification failed. The AI service may be temporarily unavailable. Error: ${e.message}`,
    };
  }
}


// =========================================================================
// FILE: tailwind.config.ts
// =========================================================================

import type {Config} from &#039;tailwindcss&#039;;

export default {
  darkMode: [&#039;class&#039;],
  content: [
    &#039;./src/pages/**/*.{js,ts,jsx,tsx,mdx}&#039;,
    &#039;./src/components/**/*.{js,ts,jsx,tsx,mdx}&#039;,
    &#039;./src/app/**/*.{js,ts,jsx,tsx,mdx}&#039;,
  ],
  theme: {
    container: {
      center: true,
      padding: &quot;2rem&quot;,
      screens: {
        &quot;2xl&quot;: &quot;1400px&quot;,
      },
    },
    extend: {
      fontFamily: {
        sans: [&quot;var(--font-poppins)&quot;, &quot;sans-serif&quot;],
      },
      colors: {
        border: &quot;hsl(var(--border))&quot;,
        input: &quot;hsl(var(--input))&quot;,
        ring: &quot;hsl(var(--ring))&quot;,
        background: &quot;hsl(var(--background))&quot;,
        foreground: &quot;hsl(var(--foreground))&quot;,
        primary: {
          DEFAULT: &quot;hsl(var(--primary))&quot;,
          foreground: &quot;hsl(var(--primary-foreground))&quot;,
        },
        secondary: {
          DEFAULT: &quot;hsl(var(--secondary))&quot;,
          foreground: &quot;hsl(var(--secondary-foreground))&quot;,
        },
        destructive: {
          DEFAULT: &quot;hsl(var(--destructive))&quot;,
          foreground: &quot;hsl(var(--destructive-foreground))&quot;,
        },
        muted: {
          DEFAULT: &quot;hsl(var(--muted))&quot;,
          foreground: &quot;hsl(var(--muted-foreground))&quot;,
        },
        accent: {
          DEFAULT: &quot;hsl(var(--accent))&quot;,
          foreground: &quot;hsl(var(--accent-foreground))&quot;,
        },
        popover: {
          DEFAULT: &quot;hsl(var(--popover))&quot;,
          foreground: &quot;hsl(var(--popover-foreground))&quot;,
        },
        card: {
          DEFAULT: &quot;hsl(var(--card))&quot;,
          foreground: &quot;hsl(var(--card-foreground))&quot;,
        },
      },
      borderRadius: {
        lg: &quot;var(--radius)&quot;,
        md: &quot;calc(var(--radius) - 2px)&quot;,
        sm: &quot;calc(var(--radius) - 4px)&quot;,
      },
      keyframes: {
        &quot;accordion-down&quot;: {
          from: { height: &quot;0&quot; },
          to: { height: &quot;var(--radix-accordion-content-height)&quot; },
        },
        &quot;accordion-up&quot;: {
          from: { height: &quot;var(--radix-accordion-content-height)&quot; },
          to: { height: &quot;0&quot; },
        },
        slideIn: {
          from: { opacity: &quot;0&quot;, transform: &quot;translateY(15px)&quot; },
          to: { opacity: &quot;1&quot;, transform: &quot;translateY(0)&quot; },
        }
      },
      animation: {
        &quot;accordion-down&quot;: &quot;accordion-down 0.2s ease-out&quot;,
        &quot;accordion-up&quot;: &quot;accordion-up 0.2s ease-out&quot;,
        &quot;slide-in&quot;: &quot;slideIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)&quot;,
      },
    },
  },
  plugins: [require(&#039;tailwindcss-animate&#039;)],
} satisfies Config;


// =========================================================================
// FILE: tsconfig.json
// =========================================================================

{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES2017&quot;,
    &quot;lib&quot;: [&quot;dom&quot;, &quot;dom.iterable&quot;, &quot;esnext&quot;],
    &quot;allowJs&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;strict&quot;: true,
    &quot;noEmit&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;module&quot;: &quot;esnext&quot;,
    &quot;moduleResolution&quot;: &quot;bundler&quot;,
    &quot;resolveJsonModule&quot;: true,
    &quot;isolatedModules&quot;: true,
    &quot;jsx&quot;: &quot;preserve&quot;,
    &quot;incremental&quot;: true,
    &quot;plugins&quot;: [
      {
        &quot;name&quot;: &quot;next&quot;
      }
    ],
    &quot;paths&quot;: {
      &quot;@/*&quot;: [&quot;./src/*&quot;]
    }
  },
  &quot;include&quot;: [&quot;next-env.d.ts&quot;, &quot;**/*.ts&quot;, &quot;**/*.tsx&quot;, &quot;.next/types/**/*.ts&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;]
}


// =========================================================================
// FILE: src/app/app-structure/page.tsx
// =========================================================================

&#039;use client&#039;;

import { useState } from &#039;react&#039;;
import Link from &#039;next/link&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent } from &#039;@/components/ui/card&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { allProjectFiles } from &#039;@/lib/file-data&#039;;
import { Copy, File as FileIcon } from &#039;lucide-react&#039;;

export default function AppStructurePage() {
  const { toast } = useToast();
  const [searchTerm, setSearchTerm] = useState(&#039;&#039;);

  const handleCopyPath = (path: string) =&gt; {
    navigator.clipboard.writeText(path);
    toast({
      title: &#039;Path Copied!&#039;,
      description: `${path} has been copied to your clipboard.`,
    });
  };

  const filteredFiles = allProjectFiles.filter(file =&gt;
    file.path.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-4xl items-start gap-6&quot;&gt;
          &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Wave Application Structure&lt;/h2&gt;

          &lt;Input
            placeholder=&quot;Search for a file...&quot;
            value={searchTerm}
            onChange={(e) =&gt; setSearchTerm(e.target.value)}
            className=&quot;bg-background&quot;
          /&gt;

          &lt;Card&gt;
            &lt;CardContent className=&quot;p-4&quot;&gt;
              &lt;div className=&quot;grid gap-2&quot;&gt;
                {filteredFiles.map((file, index) =&gt; (
                  &lt;div
                    key={file.path + index}
                    className=&quot;flex items-center justify-between rounded-md border p-3&quot;
                  &gt;
                    &lt;Link
                      href={`/app-structure/view?file=${encodeURIComponent(file.path)}`}
                      className=&quot;flex items-center gap-3 group&quot;
                    &gt;
                      &lt;FileIcon className=&quot;h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors&quot; /&gt;
                      &lt;span className=&quot;font-mono text-sm text-foreground group-hover:underline group-hover:text-primary transition-colors&quot;&gt;{file.path}&lt;/span&gt;
                    &lt;/Link&gt;
                    &lt;Button
                      variant=&quot;ghost&quot;
                      size=&quot;icon&quot;
                      onClick={() =&gt; handleCopyPath(file.path)}
                      className=&quot;h-8 w-8&quot;
                    &gt;
                      &lt;Copy className=&quot;h-4 w-4 text-muted-foreground&quot; /&gt;
                    &lt;/Button&gt;
                  &lt;/div&gt;
                ))}
              &lt;/div&gt;
            &lt;/CardContent&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/app-structure/view/page.tsx
// =========================================================================

&#039;use client&#039;;

import { Suspense, useState } from &#039;react&#039;;
import { useSearchParams, useRouter } from &#039;next/navigation&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent } from &#039;@/components/ui/card&#039;;
import { allProjectFiles } from &#039;@/lib/file-data&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { Copy, AlertTriangle, Lock } from &#039;lucide-react&#039;;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
} from &#039;@/components/ui/dialog&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { Label } from &#039;@/components/ui/label&#039;;

const ENV_PASSWORD = &quot;sonu@jeet&quot;;

function FileViewer() {
  const searchParams = useSearchParams();
  const router = useRouter();
  const { toast } = useToast();
  const filePath = searchParams.get(&#039;file&#039;);
  
  const [isEnvUnlocked, setIsEnvUnlocked] = useState(false);
  const [password, setPassword] = useState(&#039;&#039;);

  const file = allProjectFiles.find((f) =&gt; f.path === filePath);

  const handleCopyCode = (content: string) =&gt; {
    navigator.clipboard.writeText(content);
    toast({
      title: &#039;Code Copied!&#039;,
      description: `The content of ${filePath} has been copied.`,
    });
  };
  
  const handlePasswordCheck = () =&gt; {
    if (password === ENV_PASSWORD) {
      toast({ title: &quot;Access Granted&quot; });
      setIsEnvUnlocked(true);
    } else {
      toast({
        variant: &#039;destructive&#039;,
        title: &quot;Access Denied&quot;,
        description: &quot;The password you entered is incorrect.&quot;,
      });
      setPassword(&#039;&#039;);
    }
  };

  const handleKeyPress = (event: React.KeyboardEvent&lt;HTMLInputElement&gt;) =&gt; {
    if (event.key === &#039;Enter&#039;) {
      handlePasswordCheck();
    }
  };

  if (!file) {
    return (
      &lt;div className=&quot;flex flex-col items-center justify-center text-center gap-4 p-8&quot;&gt;
        &lt;AlertTriangle className=&quot;h-12 w-12 text-destructive&quot; /&gt;
        &lt;h3 className=&quot;text-xl font-bold&quot;&gt;File Not Found&lt;/h3&gt;
        &lt;p className=&quot;text-muted-foreground&quot;&gt;The file &quot;{filePath}&quot; could not be found in the project data.&lt;/p&gt;
      &lt;/div&gt;
    );
  }
  
  if (file.path === &#039;.env&#039; &amp;&amp; !isEnvUnlocked) {
    return (
       &lt;Dialog defaultOpen={true} onOpenChange={(open) =&gt; { if (!open) router.back(); }}&gt;
          &lt;DialogContent className=&quot;sm:max-w-[425px]&quot; onEscapeKeyDown={() =&gt; router.back()}&gt;
            &lt;DialogHeader&gt;
              &lt;DialogTitle className=&quot;flex items-center gap-2&quot;&gt;&lt;Lock className=&quot;h-5 w-5&quot;/&gt; Secure Access&lt;/DialogTitle&gt;
              &lt;DialogDescription&gt;
                This file is protected. Enter the password to view its content. Access is restricted to the Owner and CEO only.
              &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;div className=&quot;grid gap-4 py-4&quot;&gt;
              &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
                &lt;Label htmlFor=&quot;password-input&quot; className=&quot;text-right&quot;&gt;
                  Password
                &lt;/Label&gt;
                &lt;Input
                  id=&quot;password-input&quot;
                  type=&quot;password&quot;
                  value={password}
                  onChange={(e) =&gt; setPassword(e.target.value)}
                  onKeyDown={handleKeyPress}
                  className=&quot;col-span-3&quot;
                  autoFocus
                /&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;DialogFooter&gt;
              &lt;Button variant=&quot;outline&quot; onClick={() =&gt; router.back()}&gt;Cancel&lt;/Button&gt;
              &lt;Button onClick={handlePasswordCheck}&gt;Unlock&lt;/Button&gt;
            &lt;/DialogFooter&gt;
          &lt;/DialogContent&gt;
        &lt;/Dialog&gt;
    );
  }

  return (
    &lt;div className=&quot;relative&quot;&gt;
      &lt;Button
        variant=&quot;secondary&quot;
        size=&quot;sm&quot;
        onClick={() =&gt; handleCopyCode(file.content)}
        className=&quot;absolute top-4 right-4 z-10&quot;
      &gt;
        &lt;Copy className=&quot;mr-2 h-4 w-4&quot; /&gt;
        Copy Code
      &lt;/Button&gt;
      &lt;pre className=&quot;w-full overflow-x-auto rounded-lg bg-secondary/30 p-4 text-sm font-mono text-foreground border&quot;&gt;
        &lt;code&gt;{file.content}&lt;/code&gt;
      &lt;/pre&gt;
    &lt;/div&gt;
  );
}


export default function ViewFilePage() {
    const searchParams = useSearchParams();
    const filePath = searchParams.get(&#039;file&#039;);

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-6xl items-start gap-6&quot;&gt;
          &lt;h2 className=&quot;text-xl font-bold text-center text-primary break-all&quot;&gt;{filePath}&lt;/h2&gt;
          &lt;Card&gt;
            &lt;CardContent className=&quot;p-0&quot;&gt;
                &lt;Suspense fallback={&lt;div className=&quot;p-8 text-center&quot;&gt;Loading file...&lt;/div&gt;}&gt;
                    &lt;FileViewer /&gt;
                &lt;/Suspense&gt;
            &lt;/CardContent&gt;
          &lt;/Card&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import MenuButton from &#039;@/components/shared/MenuButton&#039;;
import PasswordDialog from &#039;@/components/auth/PasswordDialog&#039;;
import { Badge } from &#039;@/components/ui/badge&#039;;
import { Separator } from &#039;@/components/ui/separator&#039;;
import { PlaceHolderImages } from &#039;@/lib/placeholder-images&#039;;
import Image from &#039;next/image&#039;;
import { Lock } from &#039;lucide-react&#039;;

const deerIcon = PlaceHolderImages.find(img =&gt; img.id === &#039;bill-watermark&#039;);

export default function Home() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
          &lt;div className=&quot;grid gap-3&quot;&gt;
            &lt;MenuButton href=&quot;/products&quot;&gt;Product Details &amp; Rate&lt;/MenuButton&gt;
            &lt;MenuButton href=&quot;/measurements&quot;&gt;Flutes Measurement&lt;/MenuButton&gt;
            &lt;MenuButton href=&quot;/polish-calculator&quot;&gt;
              Polish Rate Calculator
            &lt;/MenuButton&gt;
            
            &lt;Separator className=&quot;my-2&quot; /&gt;

            &lt;MenuButton href=&quot;/employee-rules&quot;&gt;Employee Rules&lt;/MenuButton&gt;
            &lt;MenuButton href=&quot;/flute-bamboo-quality&quot;&gt;Flute &amp; Bamboo Quality&lt;/MenuButton&gt;
            
            &lt;Separator className=&quot;my-2&quot; /&gt;

            &lt;PasswordDialog trigger={
              &lt;div className=&quot;flex w-full cursor-pointer items-center justify-between rounded-lg border border-border bg-gradient-to-r from-stone-900 to-zinc-900 p-4 text-left text-base font-medium transition-transform active:scale-[0.98] hover:border-primary/50&quot;&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Lock className=&quot;h-4 w-4&quot; /&gt;
                  &lt;span&gt;CII&lt;/span&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                  &lt;Badge variant=&quot;destructive&quot; className=&quot;bg-primary text-primary-foreground&quot;&gt;SECURE&lt;/Badge&gt;
                  &lt;span className=&quot;text-primary font-bold&quot;&gt;→&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            } /&gt;
            
            &lt;MenuButton href=&quot;/billing&quot;&gt;Receive &amp; Bill&lt;/MenuButton&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/components/shared/MenuButton.tsx
// =========================================================================

import Link from &#039;next/link&#039;;
import type { ReactNode } from &#039;react&#039;;
import { cn } from &#039;@/lib/utils&#039;;

interface MenuButtonProps {
  href: string;
  children: ReactNode;
  className?: string;
}

export default function MenuButton({ href, children, className }: MenuButtonProps) {
  return (
    &lt;Link
      href={href}
      className={cn(
        &quot;flex w-full items-center justify-between rounded-lg border border-border bg-gradient-to-r from-stone-900 to-zinc-900 p-4 text-left text-base font-medium transition-transform active:scale-[0.98] hover:border-primary/50&quot;,
        className
      )}
    &gt;
      &lt;span&gt;{children}&lt;/span&gt;
      &lt;span className=&quot;text-primary font-bold&quot;&gt;→&lt;/span&gt;
    &lt;/Link&gt;
  );
}


// =========================================================================
// FILE: src/app/billing/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import MenuButton from &#039;@/components/shared/MenuButton&#039;;
import PasswordDialog from &#039;@/components/auth/PasswordDialog&#039;;
import { Badge } from &#039;@/components/ui/badge&#039;;
import { Separator } from &#039;@/components/ui/separator&#039;;

export default function BillingPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-2xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Receive &amp; Bill&lt;/h2&gt;
            &lt;div className=&quot;grid gap-3&quot;&gt;
                &lt;MenuButton href=&quot;/billing/new&quot;&gt;Generate New Bill&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/billing/history&quot;&gt;Bills History&lt;/MenuButton&gt;
                &lt;MenuButton href=&quot;/employee-document&quot;&gt;Employee Document&lt;/MenuButton&gt;
                &lt;PasswordDialog trigger={
                  &lt;div className=&quot;flex w-full cursor-pointer items-center justify-between rounded-lg border border-border bg-gradient-to-r from-stone-900 to-zinc-900 p-4 text-left text-base font-medium transition-transform active:scale-[0.98] hover:border-primary/50&quot;&gt;
                    &lt;span&gt;CII&lt;/span&gt;
                    &lt;div className=&quot;flex items-center gap-2&quot;&gt;
                      &lt;Badge variant=&quot;destructive&quot; className=&quot;bg-primary text-primary-foreground&quot;&gt;SECURE&lt;/Badge&gt;
                      &lt;span className=&quot;text-primary font-bold&quot;&gt;→&lt;/span&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                } /&gt;
                &lt;Separator className=&quot;my-2&quot; /&gt;
                &lt;MenuButton href=&quot;/app-structure&quot;&gt;Wave Application Structure&lt;/MenuButton&gt;
            &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/cii/page.tsx
// =========================================================================

&#039;use client&#039;;

import { useState, useRef } from &#039;react&#039;;
import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &#039;@/components/ui/card&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { useLocalStorage } from &#039;@/hooks/use-local-storage&#039;;
import Image from &#039;next/image&#039;;
import { PlusCircle, Trash2, Download, UserPlus, FileUp } from &#039;lucide-react&#039;;
import SecureDeleteDialog from &#039;@/components/cii/SecureDeleteDialog&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { PlaceHolderImages } from &#039;@/lib/placeholder-images&#039;;
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
  DialogFooter,
  DialogTrigger,
} from &#039;@/components/ui/dialog&#039;;
import { Label } from &#039;@/components/ui/label&#039;;
import { useEmployees, type Employee } from &#039;@/hooks/use-employees&#039;;
import AddEmployeeForm from &#039;@/components/cii/AddEmployeeForm&#039;;


interface CiiImage {
  id: string;
  name: string;
  dataUrl: string;
}

const initialCiiImages: CiiImage[] = PlaceHolderImages.map(img =&gt; ({
  id: img.id,
  name: img.description,
  dataUrl: img.imageUrl,
}));

export default function CIIPage() {
  const [images, setImages] = useLocalStorage&lt;CiiImage[]&gt;(&#039;pjCiiImages&#039;, initialCiiImages);
  const fileInputRef = useRef&lt;HTMLInputElement&gt;(null);
  const { toast } = useToast();
  const { employees } = useEmployees();

  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);
  const [newImageTitle, setNewImageTitle] = useState(&#039;&#039;);
  const [newImageData, setNewImageData] = useState&lt;{ dataUrl: string; file: File } | null&gt;(null);

  const [actionsOpen, setActionsOpen] = useState(false);
  const [addEmployeeOpen, setAddEmployeeOpen] = useState(false);

  const handleImageUpload = (event: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    const file = event.target.files?.[0];
    if (file) {
      if (file.size &gt; 5 * 1024 * 1024) { // 5MB limit
        toast({
          variant: &quot;destructive&quot;,
          title: &quot;File too large&quot;,
          description: &quot;Please upload an image smaller than 5MB.&quot;,
        });
        return;
      }
      const reader = new FileReader();
      reader.onload = (e) =&gt; {
        setNewImageData({ dataUrl: e.target?.result as string, file });
        setNewImageTitle(file.name); // Pre-fill title with file name
        setUploadDialogOpen(true);
        setActionsOpen(false);
      };
      reader.readAsDataURL(file);
    }
  };
  
  const handleSaveImage = () =&gt; {
    if (!newImageData || !newImageTitle.trim()) {
      toast({
        variant: &quot;destructive&quot;,
        title: &quot;Title is required&quot;,
        description: &quot;Please provide a title for the image.&quot;,
      });
      return;
    }
    
    const newImage: CiiImage = {
        id: `cii-${Date.now()}`,
        name: newImageTitle.trim(),
        dataUrl: newImageData.dataUrl,
    };

    setImages((prevImages) =&gt; [newImage, ...prevImages]);
    toast({
        title: &quot;Image Saved&quot;,
        description: `&quot;${newImage.name}&quot; has been saved to the gallery.`,
    });

    setUploadDialogOpen(false);
    setNewImageData(null);
    setNewImageTitle(&#039;&#039;);

    if (fileInputRef.current) {
        fileInputRef.current.value = &#039;&#039;;
    }
  };

  const handleUploadClick = () =&gt; {
    fileInputRef.current?.click();
  };
  
  const handleAddNewEmployee = () =&gt; {
    setActionsOpen(false);
    setAddEmployeeOpen(true);
  };


  const handleDeleteImage = (id: string, reason: string) =&gt; {
    const imageToDelete = images.find(img =&gt; img.id === id);
    setImages(images.filter((image) =&gt; image.id !== id));
    toast({
      title: &quot;Image Deleted&quot;,
      description: `&quot;${imageToDelete?.name}&quot; was deleted. Reason: ${reason}`,
    });
  };

  const handleDownloadImage = (image: CiiImage) =&gt; {
    const link = document.createElement(&#039;a&#039;);
    link.href = image.dataUrl;
    const fileName = image.name.includes(&#039;.&#039;) ? image.name.split(&#039;.&#039;)[0] : image.name;
    link.download = `${fileName}.png`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    toast({
        title: &quot;Image Downloading...&quot;,
        description: `&quot;${image.name}&quot; is being saved.`,
    })
  };

  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-6xl items-start gap-6&quot;&gt;
          &lt;div className=&quot;flex items-center justify-between&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-primary&quot;&gt;Company Important Images&lt;/h2&gt;
             &lt;Dialog open={actionsOpen} onOpenChange={setActionsOpen}&gt;
                &lt;DialogTrigger asChild&gt;
                    &lt;Button variant=&quot;outline&quot; size=&quot;icon&quot;&gt;
                        &lt;PlusCircle className=&quot;h-5 w-5&quot; /&gt;
                    &lt;/Button&gt;
                &lt;/DialogTrigger&gt;
                &lt;DialogContent className=&quot;sm:max-w-xs&quot;&gt;
                    &lt;DialogHeader&gt;
                        &lt;DialogTitle&gt;Actions&lt;/DialogTitle&gt;
                        &lt;DialogDescription&gt;
                            What would you like to add?
                        &lt;/DialogDescription&gt;
                    &lt;/DialogHeader&gt;
                    &lt;div className=&quot;grid gap-3 py-4&quot;&gt;
                        &lt;Button variant=&quot;outline&quot; onClick={handleUploadClick}&gt;
                            &lt;FileUp className=&quot;mr-2 h-4 w-4&quot; /&gt;
                            Upload Image
                        &lt;/Button&gt;
                        &lt;Button variant=&quot;outline&quot; onClick={handleAddNewEmployee}&gt;
                           &lt;UserPlus className=&quot;mr-2 h-4 w-4&quot; /&gt;
                           Add New Employee
                        &lt;/Button&gt;
                    &lt;/div&gt;
                &lt;/DialogContent&gt;
            &lt;/Dialog&gt;
            &lt;Input
              type=&quot;file&quot;
              ref={fileInputRef}
              onChange={handleImageUpload}
              className=&quot;hidden&quot;
              accept=&quot;image/*&quot;
            /&gt;
          &lt;/div&gt;

          {images.length === 0 ? (
            &lt;Card&gt;
              &lt;CardContent className=&quot;p-10&quot;&gt;
                &lt;p className=&quot;text-center text-muted-foreground&quot;&gt;No images found. Click &#039;+&#039; to add new ones.&lt;/p&gt;
              &lt;/CardContent&gt;
            &lt;/Card&gt;
          ) : (
            &lt;div className=&quot;grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4&quot;&gt;
              {images.map((image) =&gt; (
                &lt;Card key={image.id} className=&quot;group relative overflow-hidden shadow-lg border-2 border-transparent hover:border-primary transition-all duration-300&quot;&gt;
                  &lt;CardContent className=&quot;p-0&quot;&gt;
                    &lt;Image
                      src={image.dataUrl}
                      alt={image.name}
                      width={400}
                      height={400}
                      className=&quot;aspect-square w-full object-cover transition-transform group-hover:scale-105&quot;
                      crossOrigin=&quot;anonymous&quot;
                    /&gt;
                  &lt;/CardContent&gt;
                  &lt;div className=&quot;absolute bottom-0 w-full bg-gradient-to-t from-black/80 via-black/50 to-transparent p-3&quot;&gt;
                     &lt;p className=&quot;text-white text-sm font-semibold truncate&quot;&gt;{image.name}&lt;/p&gt;
                  &lt;/div&gt;
                  &lt;div className=&quot;absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300&quot;&gt;
                     &lt;SecureDeleteDialog 
                        imageName={image.name} 
                        onDeleteConfirm={(reason) =&gt; handleDeleteImage(image.id, reason)}
                        trigger={
                            &lt;Button variant=&quot;destructive&quot; size=&quot;icon&quot; className=&quot;h-9 w-9 rounded-full shadow-md&quot;&gt;
                                &lt;Trash2 className=&quot;h-4 w-4&quot; /&gt;
                            &lt;/Button&gt;
                        }
                      /&gt;
                  &lt;/div&gt;
                   &lt;div className=&quot;absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300&quot;&gt;
                     &lt;Button variant=&quot;secondary&quot; size=&quot;icon&quot; className=&quot;h-9 w-9 rounded-full shadow-md&quot; onClick={() =&gt; handleDownloadImage(image)}&gt;
                        &lt;Download className=&quot;h-4 w-4&quot; /&gt;
                     &lt;/Button&gt;
                  &lt;/div&gt;
                &lt;/Card&gt;
              ))}
            &lt;/div&gt;
          )}

          &lt;div className=&quot;mt-8&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-primary&quot;&gt;Employee Records&lt;/h2&gt;
             &lt;Card className=&quot;mt-4&quot;&gt;
                &lt;CardHeader&gt;
                    &lt;CardTitle&gt;Current Employees&lt;/CardTitle&gt;
                    &lt;CardDescription&gt;This is the list of employees used for document verification.&lt;/CardDescription&gt;
                &lt;/CardHeader&gt;
                &lt;CardContent&gt;
                    &lt;div className=&quot;grid gap-3&quot;&gt;
                        {employees.map(emp =&gt; (
                            &lt;div key={emp.id} className=&quot;flex justify-between items-center p-3 rounded-lg border bg-secondary/30&quot;&gt;
                                &lt;div&gt;
                                    &lt;p className=&quot;font-semibold text-foreground&quot;&gt;{emp.name}&lt;/p&gt;
                                    &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{emp.refNumber}&lt;/p&gt;
                                &lt;/div&gt;
                                &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;{emp.address}&lt;/p&gt;
                            &lt;/div&gt;
                        ))}
                    &lt;/div&gt;
                &lt;/CardContent&gt;
            &lt;/Card&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/main&gt;

      {/* Dialog for adding title to new image */}
      &lt;Dialog open={uploadDialogOpen} onOpenChange={setUploadDialogOpen}&gt;
        &lt;DialogContent&gt;
            &lt;DialogHeader&gt;
                &lt;DialogTitle&gt;Add Image Title&lt;/DialogTitle&gt;
                &lt;DialogDescription&gt;
                    Provide a title for your image before saving it to the gallery.
                &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;div className=&quot;grid gap-4 py-4&quot;&gt;
                {newImageData &amp;&amp; (
                    &lt;Image
                        src={newImageData.dataUrl}
                        alt=&quot;Upload preview&quot;
                        width={400}
                        height={200}
                        className=&quot;rounded-md border aspect-video object-contain w-full&quot;
                    /&gt;
                )}
                &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
                    &lt;Label htmlFor=&quot;image-title&quot; className=&quot;text-right&quot;&gt;
                        Title
                    &lt;/Label&gt;
                    &lt;Input
                        id=&quot;image-title&quot;
                        value={newImageTitle}
                        onChange={(e) =&gt; setNewImageTitle(e.target.value)}
                        className=&quot;col-span-3&quot;
                        autoFocus
                    /&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;DialogFooter&gt;
                &lt;Button variant=&quot;outline&quot; onClick={() =&gt; setUploadDialogOpen(false)}&gt;Cancel&lt;/Button&gt;
                &lt;Button onClick={handleSaveImage} disabled={!newImageTitle.trim()}&gt;Save Image&lt;/Button&gt;
            &lt;/DialogFooter&gt;
        &lt;/DialogContent&gt;
      &lt;/Dialog&gt;
      
      {/* Dialog for adding new employee */}
      &lt;Dialog open={addEmployeeOpen} onOpenChange={setAddEmployeeOpen}&gt;
          &lt;DialogContent&gt;
              &lt;DialogHeader&gt;
                  &lt;DialogTitle&gt;Add New Employee&lt;/DialogTitle&gt;
                  &lt;DialogDescription&gt;
                      Fill in the details for the new employee. This will be saved locally.
                  &lt;/DialogDescription&gt;
              &lt;/DialogHeader&gt;
              &lt;AddEmployeeForm onFinished={() =&gt; setAddEmployeeOpen(false)} /&gt;
          &lt;/DialogContent&gt;
      &lt;/Dialog&gt;

    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/employee-rules/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from &#039;@/components/ui/card&#039;;
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from &#039;@/components/ui/accordion&#039;;

const rules = [
    {
        title: &quot;1. Customer Interaction&quot;,
        english: &quot;Every employee must communicate politely and respectfully with all customers. Abusive language or rude behavior is strictly prohibited. Your primary goal is to provide a positive experience.&quot;,
        hindi: &quot;प्रत्येक कर्मचारी को सभी ग्राहकों के साथ विनम्रता और सम्मानपूर्वक संवाद करना चाहिए। अपमानजनक भाषा या अशिष्ट व्यवहार सख्त वर्जित है। आपका प्राथमिक लक्ष्य एक सकारात्मक अनुभव प्रदान करना है।&quot;
    },
    {
        title: &quot;2. Official Documentation&quot;,
        english: &quot;All employees are required to possess their official Employee Confidential Information (ECC) document at all times during work hours. An individual without this document will not be recognized as a company employee.&quot;,
        hindi: &quot;सभी कर्मचारियों को काम के घंटों के दौरान हर समय अपना आधिकारिक कर्मचारी गोपनीय सूचना (ईसीसी) दस्तावेज़ रखना आवश्यक है। इस दस्तावेज़ के बिना किसी भी व्यक्ति को कंपनी का कर्मचारी नहीं माना जाएगा।&quot;
    },
    {
        title: &quot;3. Discipline and Regulation&quot;,
        english: &quot;Maintain utmost discipline and professionalism during company work hours. All work must be performed uniformly and ethically. Any inappropriate activities are strictly forbidden.&quot;,
        hindi: &quot;कंपनी के काम के घंटों के दौरान अत्यंत अनुशासन और व्यावसायिकता बनाए रखें। सभी काम समान रूप से और नैतिक रूप से किए जाने चाहिए। किसी भी प्रकार की अनुचित गतिविधियाँ सख्त वर्जित हैं।&quot;
    },
    {
        title: &quot;4. Primary Job Role&quot;,
        english: &quot;The main responsibility of an employee is to find and attract new customers for the company. It is crucial to treat every potential and existing customer with respect and provide them with accurate information.&quot;,
        hindi: &quot;एक कर्मचारी की मुख्य जिम्मेदारी कंपनी के लिए नए ग्राहक ढूंढना और उन्हें आकर्षित करना है। प्रत्येक संभावित और मौजूदा ग्राहक के साथ सम्मान से पेश आना और उन्हें सटीक जानकारी प्रदान करना महत्वपूर्ण है।&quot;
    },
    {
        title: &quot;5. Commission and Incentives&quot;,
        english: &quot;Compensation is performance-based. For sales from clients purchasing flutes under ₹1000, you will receive a 25% commission. For sales from clients purchasing flutes worth ₹1000 or more, you will receive a 30% commission. Top-performing employees will be rewarded with higher commission tiers (30% instead of 25%, and 35% instead of 30%), with the potential to reach up to 40%. This opportunity is reserved for consistent top performers.&quot;,
        hindi: &quot;मुआवजा प्रदर्शन-आधारित है। ₹1000 से कम की बांसुरी खरीदने वाले ग्राहकों से बिक्री के लिए, आपको 25% कमीशन मिलेगा। ₹1000 या उससे अधिक की बांसुरी खरीदने वाले ग्राहकों से बिक्री के लिए, आपको 30% कमीशन मिलेगा। शीर्ष प्रदर्शन करने वाले कर्मचारियों को उच्च कमीशन स्तरों से पुरस्कृत किया जाएगा (25% के बजाय 30%, और 30% के बजाय 35%), जिसमें 40% तक पहुंचने की क्षमता है। यह अवसर केवल लगातार शीर्ष प्रदर्शन करने वालों के लिए आरक्षित है।&quot;
    },
    {
        title: &quot;6. Hierarchy and Respect&quot;,
        english: &quot;All employees must respect the company&#039;s hierarchy. Show the highest respect to the Owner, followed by the CEO, and then the Chief of Staff (CoS) or Personal Assistant (PA). Disrespectful behavior towards anyone in the company will not be tolerated. Maintain discipline at all times.&quot;,
        hindi: &quot;सभी कर्मचारियों को कंपनी के पदानुक्रम का सम्मान करना चाहिए। मालिक को सर्वोच्च सम्मान दें, उसके बाद सीईओ, और फिर चीफ ऑफ स्टाफ (सीओएस) या पर्सनल असिस्टेंट (पीए) को। कंपनी में किसी के भी प्रति अनादरपूर्ण व्यवहार बर्दाश्त नहीं किया जाएगा। हर समय अनुशासन बनाए रखें।&quot;
    }
];


export default function EmployeeRulesPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-4xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Employee Rules &amp; Guidelines&lt;/h2&gt;
            &lt;Card&gt;
                &lt;CardHeader&gt;
                    &lt;CardTitle&gt;Code of Conduct&lt;/CardTitle&gt;
                    &lt;CardDescription&gt;
                        These rules are mandatory for all PJ OFFICIAL employees to ensure a professional, respectful, and productive work environment.
                    &lt;/CardDescription&gt;
                &lt;/CardHeader&gt;
                &lt;CardContent&gt;
                    &lt;Accordion type=&quot;single&quot; collapsible className=&quot;w-full&quot;&gt;
                        {rules.map((rule, index) =&gt; (
                            &lt;AccordionItem value={`item-${index}`} key={index}&gt;
                                &lt;AccordionTrigger className=&quot;text-lg hover:no-underline&quot;&gt;{rule.title}&lt;/AccordionTrigger&gt;
                                &lt;AccordionContent className=&quot;space-y-4 px-2&quot;&gt;
                                    &lt;div&gt;
                                        &lt;h4 className=&quot;font-semibold mb-1 text-base text-foreground&quot;&gt;English:&lt;/h4&gt;
                                        &lt;p className=&quot;text-muted-foreground&quot;&gt;{rule.english}&lt;/p&gt;
                                    &lt;/div&gt;
                                    &lt;div&gt;
                                        &lt;h4 className=&quot;font-semibold mb-1 text-base text-foreground&quot;&gt;Hindi (हिन्दी):&lt;/h4&gt;
                                        &lt;p className=&quot;text-muted-foreground&quot;&gt;{rule.hindi}&lt;/p&gt;
                                    &lt;/div&gt;
                                &lt;/AccordionContent&gt;
                            &lt;/AccordionItem&gt;
                        ))}
                    &lt;/Accordion&gt;
                &lt;/CardContent&gt;
            &lt;/Card&gt;
        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/app/flute-bamboo-quality/page.tsx
// =========================================================================

import AppHeader from &#039;@/components/shared/AppHeader&#039;;
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from &#039;@/components/ui/card&#039;;
import ProcessingInfo from &#039;@/components/quality/ProcessingInfo&#039;;
import { Separator } from &#039;@/components/ui/separator&#039;;

export default function FluteBambooQualityPage() {
  return (
    &lt;div className=&quot;flex min-h-screen w-full flex-col&quot;&gt;
      &lt;AppHeader /&gt;
      &lt;main className=&quot;flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8 animate-slide-in&quot;&gt;
        &lt;div className=&quot;mx-auto grid w-full max-w-4xl items-start gap-6&quot;&gt;
            &lt;h2 className=&quot;text-2xl font-bold text-center text-primary&quot;&gt;Flute &amp; Bamboo Quality&lt;/h2&gt;

            &lt;Card&gt;
                &lt;CardHeader&gt;
                    &lt;CardTitle&gt;Flute Quality Tiers&lt;/CardTitle&gt;
                    &lt;CardDescription&gt;Details about our range of flutes.&lt;/CardDescription&gt;
                &lt;/CardHeader&gt;
                &lt;CardContent className=&quot;space-y-4&quot;&gt;
                    &lt;div className=&quot;rounded-lg border bg-card p-4&quot;&gt;
                        &lt;h3 className=&quot;font-semibold text-lg text-foreground&quot;&gt;Normal Quality Flutes&lt;/h3&gt;
                        &lt;p className=&quot;text-muted-foreground&quot;&gt;Price Range: &lt;span className=&quot;font-bold text-primary&quot;&gt;₹400 – ₹8,000&lt;/span&gt;&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div className=&quot;rounded-lg border bg-card p-4&quot;&gt;
                        &lt;h3 className=&quot;font-semibold text-lg text-foreground&quot;&gt;Premium Quality Flutes&lt;/h3&gt;
                        &lt;p className=&quot;text-muted-foreground&quot;&gt;Price Range: &lt;span className=&quot;font-bold text-primary&quot;&gt;₹700 – ₹20,000&lt;/span&gt;&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/CardContent&gt;
            &lt;/Card&gt;

            &lt;Separator /&gt;
            
            &lt;ProcessingInfo /&gt;

        &lt;/div&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
}


// =========================================================================
// FILE: src/components/cii/SecureDeleteDialog.tsx
// =========================================================================

&#039;use client&#039;;

import React, { useState, useEffect, type ReactNode, useRef, useMemo } from &#039;react&#039;;
import emailjs from &#039;@emailjs/browser&#039;;
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter, DialogTrigger } from &#039;@/components/ui/dialog&#039;;
import { Button } from &#039;@/components/ui/button&#039;;
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from &#039;@/components/ui/select&#039;;
import { Input } from &#039;@/components/ui/input&#039;;
import { deletionReasons } from &#039;@/lib/data&#039;;
import { HelpCircle, CheckCircle2, XCircle, Check, Loader2 } from &#039;lucide-react&#039;;
import { Label } from &#039;../ui/label&#039;;
import { PlaceHolderImages } from &#039;@/lib/placeholder-images&#039;;
import { cn } from &#039;@/lib/utils&#039;;
import { useToast } from &#039;@/hooks/use-toast&#039;;
import { saveOTPToFirestore, verifyOTPFromFirestore } from &#039;@/lib/otpService&#039;;

const CORRECT_MASTER_PASSWORD = &quot;PJ-ECC dashboard*432Hz&quot;;

const securityQuestions = [
    {
      id: &#039;q1&#039;,
      question: &quot;What is the owner&#039;s birth year? (DD/MM/YYYY)&quot;,
      validate: (val: string) =&gt; {
        const cleanVal = val.toLowerCase().replace(/[\s,.-]/g, &#039;&#039;);
        const dayMatch = cleanVal.includes(&#039;14&#039;);
        const monthMatch = cleanVal.includes(&#039;mar&#039;) || cleanVal.includes(&#039;03&#039;) || cleanVal.includes(&#039;3&#039;);
        const yearMatch = cleanVal.includes(&#039;2008&#039;);
        return dayMatch &amp;&amp; monthMatch &amp;&amp; yearMatch;
      }
    },
    {
      id: &#039;q2&#039;,
      question: &quot;What is the company&#039;s registration city?&quot;,
      validate: (val: string) =&gt; {
        const cleanVal = val.toLowerCase().replace(/[\s,.-]/g, &#039;&#039;);
        const cityMatch = cleanVal.includes(&#039;diglipur&#039;);
        const regionMatch = cleanVal.includes(&#039;nandaman&#039;) || cleanVal.includes(&#039;northandaman&#039;);
        return cityMatch &amp;&amp; regionMatch;
      }
    },
    {
      id: &#039;q3&#039;,
      question: &quot;Paste the company&#039;s official YouTube channel link&quot;,
      validate: (val: string) =&gt; {
        return val.trim() === &#039;https://www.youtube.com/@PJCompany-432&#039;;
      }
    },
];

const watermarkImage = PlaceHolderImages.find(img =&gt; img.id === &#039;bill-watermark&#039;);


interface SecureDeleteDialogProps {
  imageName: string;
  onDeleteConfirm: (reason: string) =&gt; void;
  trigger: ReactNode;
}

type Step = &#039;password&#039; | &#039;reason&#039; | &#039;otp&#039; | &#039;questions&#039; | &#039;deleting&#039; | &#039;success&#039;;
type OtpSubStep = &#039;enter_email&#039; | &#039;verify_otp&#039;;

export default function SecureDeleteDialog({ imageName, onDeleteConfirm, trigger }: SecureDeleteDialogProps) {
  const [isOpen, setIsOpen] = useState(false);
  const [step, setStep] = useState&lt;Step&gt;(&#039;password&#039;);
  const [otpSubStep, setOtpSubStep] = useState&lt;OtpSubStep&gt;(&#039;enter_email&#039;);
  const [passwordInput, setPasswordInput] = useState(&#039;&#039;);
  const [reason, setReason] = useState(&quot;&quot;);
  const [email, setEmail] = useState(&quot;&quot;);
  const [otpInput, setOtpInput] = useState(Array(6).fill(&#039;&#039;));
  const [questionAnswers, setQuestionAnswers] = useState(Array(securityQuestions.length).fill(&#039;&#039;));
  const [answersStatus, setAnswersStatus] = useState&lt;(&#039;correct&#039; | &#039;incorrect&#039; | &#039;neutral&#039;)[]&gt;(Array(securityQuestions.length).fill(&#039;neutral&#039;));
  const [error, setError] = useState(&quot;&quot;);
  const [progress, setProgress] = useState(0);
  const [isStopped, setIsStopped] = useState(false);
  const timerRef = useRef&lt;NodeJS.Timeout | null&gt;(null);
  
  const [isSendingOtp, setIsSendingOtp] = useState(false);
  const [isVerifyingOtp, setIsVerifyingOtp] = useState(false);
  const { toast } = useToast();

  const bubbles = useMemo(() =&gt; Array.from({ length: 20 }).map((_, i) =&gt; {
      const size = `${Math.random() * 20 + 5}px`;
      const left = `${Math.random() * 100}%`;
      const duration = `${Math.random() * 8 + 5}s`;
      const delay = `${Math.random() * 5}s`;
      return &lt;span key={i} className=&quot;bubble&quot; style={{ 
          width: size, 
          height: size, 
          left: left, 
          animationDuration: duration,
          animationDelay: delay,
      }} /&gt;;
  }), []);

  const areAllAnswersCorrect = answersStatus.every(s =&gt; s === &#039;correct&#039;);

  useEffect(() =&gt; {
    if (step !== &#039;deleting&#039; || isStopped) return;

    const startTime = Date.now();
    const duration = 30000; // 30 seconds

    const updateProgress = () =&gt; {
        const elapsedTime = Date.now() - startTime;
        const currentProgress = Math.min((elapsedTime / duration) * 100, 100);
        setProgress(currentProgress);

        if (currentProgress &gt;= 100) {
            onDeleteConfirm(reason);
            setStep(&#039;success&#039;);
        } else {
            timerRef.current = setTimeout(updateProgress, 50);
        }
    };

    timerRef.current = setTimeout(updateProgress, 50);

    return () =&gt; {
        if(timerRef.current) clearTimeout(timerRef.current);
    }
  }, [step, isStopped, onDeleteConfirm, reason]);

  useEffect(() =&gt; {
    if (step !== &#039;success&#039;) return;
    const timer = setTimeout(() =&gt; {
        handleClose();
    }, 3000);
    return () =&gt; clearTimeout(timer);
  }, [step]);


  const handleOtpChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;, index: number) =&gt; {
    const { value } = e.target;
    if (/^[0-9]$/.test(value) || value === &#039;&#039;) {
        const newOtp = [...otpInput];
        newOtp[index] = value;
        setOtpInput(newOtp);
        if (value &amp;&amp; index &lt; 5) {
            document.getElementById(`otp-${index + 1}`)?.focus();
        }
    }
  };

  const handleOtpKeyDown = (e: React.KeyboardEvent&lt;HTMLInputElement&gt;, index: number) =&gt; {
    if (e.key === &#039;Backspace&#039; &amp;&amp; !otpInput[index] &amp;&amp; index &gt; 0) {
      document.getElementById(`otp-${index - 1}`)?.focus();
    }
  };

  const handleOtpPaste = (e: React.ClipboardEvent&lt;HTMLInputElement&gt;) =&gt; {
    e.preventDefault();
    const pastedText = e.clipboardData.getData(&#039;text&#039;);
    const digits = pastedText.match(/\d/g);

    if (digits &amp;&amp; digits.length &gt; 0) {
        const newOtp = Array(6).fill(&#039;&#039;);
        const pastedDigits = digits.slice(0, 6);
        pastedDigits.forEach((digit, index) =&gt; {
            newOtp[index] = digit;
        });
        setOtpInput(newOtp);

        const focusIndex = pastedDigits.length &lt; 6 ? pastedDigits.length : 5;
        document.getElementById(`otp-${focusIndex}`)?.focus();
    }
  };

  const handleAnswerChange = (e: React.ChangeEvent&lt;HTMLInputElement&gt;, index: number) =&gt; {
    const newAnswers = [...questionAnswers];
    newAnswers[index] = e.target.value;
    setQuestionAnswers(newAnswers);

    const newStatuses = [...answersStatus];
    const isCorrect = securityQuestions[index].validate(e.target.value);

    if (e.target.value === &#039;&#039;) {
        newStatuses[index] = &#039;neutral&#039;;
    } else {
        newStatuses[index] = isCorrect ? &#039;correct&#039; : &#039;incorrect&#039;;
    }
    setAnswersStatus(newStatuses);
  };

  const handleClose = () =&gt; {
    setIsOpen(false);
  };

  const handleOpenChange = (open: boolean) =&gt; {
    setIsOpen(open);
    if (!open) {
        setTimeout(() =&gt; {
            setStep(&#039;password&#039;);
            setOtpSubStep(&#039;enter_email&#039;);
            setPasswordInput(&#039;&#039;);
            setReason(&#039;&#039;);
            setEmail(&#039;&#039;);
            setOtpInput(Array(6).fill(&#039;&#039;));
            setQuestionAnswers(Array(securityQuestions.length).fill(&#039;&#039;));
            setAnswersStatus(Array(securityQuestions.length).fill(&#039;neutral&#039;));
            setError(&#039;&#039;);
            setProgress(0);
            setIsStopped(false);
            if (timerRef.current) clearTimeout(timerRef.current);
        }, 300);
    }
  }


  const handlePasswordSubmit = () =&gt; {
    if (passwordInput === CORRECT_MASTER_PASSWORD) {
      setError(&quot;&quot;);
      setStep(&#039;reason&#039;);
    } else {
      setError(&quot;Incorrect password. Please try again.&quot;);
      setPasswordInput(&#039;&#039;);
    }
  };

  const handlePasswordKeyPress = (event: React.KeyboardEvent&lt;HTMLInputElement&gt;) =&gt; {
    if (event.key === &#039;Enter&#039;) {
        handlePasswordSubmit();
    }
  };

  const handleReasonSubmit = () =&gt; {
    if (!reason) {
      setError(&quot;Please select a reason for deletion.&quot;);
      return;
    }
    setError(&quot;&quot;);
    setStep(&#039;otp&#039;);
  };

  const handleSendOTP = async (e: React.FormEvent) =&gt; {
    e.preventDefault();
    setIsSendingOtp(true);
    setError(&#039;&#039;);

    const newOTP = Math.floor(100000 + Math.random() * 900000).toString();

    try {
        await saveOTPToFirestore(email, newOTP);
        console.log(&quot;Firebase: OTP saved successfully.&quot;);

        const templateParams = {
            to_email: email,
            passcode: newOTP,
        };

        await emailjs.send(
            &quot;service_4mpzhc6&quot;,
            &quot;template_wof8h28&quot;,
            templateParams,
            &quot;EevqJ2-cX2wrZXXJO&quot;
        );
        console.log(&quot;EmailJS: Email sent successfully.&quot;);

        setOtpSubStep(&#039;verify_otp&#039;);
        toast({ title: &quot;OTP Sent!&quot;, description: `A 6-digit code has been sent to ${email}.` });

    } catch (err: any) {
        console.error(&quot;OTP Sending Failed:&quot;, err);
        
        const detailError = err.text || err.message || JSON.stringify(err);
        
        setError(detailError);
        toast({
            variant: &#039;destructive&#039;,
            title: &quot;Operation Failed&quot;,
            description: detailError,
            duration: 9000,
        });
    } finally {
        setIsSendingOtp(false);
    }
};


  const handleOtpSubmit = async () =&gt; {
    const enteredOtp = otpInput.join(&#039;&#039;);
    if (enteredOtp.length !== 6) {
        setError(&quot;Please enter a 6-digit OTP.&quot;);
        return;
    }
    
    setIsVerifyingOtp(true);
    setError(&quot;&quot;);

    try {
        const isValid = await verifyOTPFromFirestore(email, enteredOtp);
        if (isValid) {
            setOtpInput(otpInput.map(() =&gt; &#039;✔&#039;));
            setTimeout(() =&gt; setStep(&#039;questions&#039;), 500);
        } else {
            setError(&quot;Invalid or expired OTP. Please try again.&quot;);
            setOtpInput(Array(6).fill(&#039;&#039;));
            document.getElementById(&#039;otp-0&#039;)?.focus();
        }
    } catch (err) {
        console.error(&quot;OTP Verification Error:&quot;, err);
        setError(&quot;An error occurred during verification. Please try again.&quot;);
    } finally {
        setIsVerifyingOtp(false);
    }
  };

  const handleQuestionsSubmit = () =&gt; {
    if (areAllAnswersCorrect) {
      setStep(&#039;deleting&#039;);
    }
  }

  const handleStopDeletion = () =&gt; {
    setIsStopped(true);
    if (timerRef.current) clearTimeout(timerRef.current);
    handleClose();
  }

  const renderContent = () =&gt; {
    switch (step) {
      case &#039;password&#039;:
        return (
          &lt;&gt;
            &lt;DialogHeader&gt;
              &lt;DialogTitle&gt;Secure Access Required&lt;/DialogTitle&gt;
              &lt;DialogDescription&gt;
                Please enter the master password to initiate the deletion process.
              &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;div className=&quot;py-4 space-y-2&quot;&gt;
              &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
                  &lt;Label htmlFor=&quot;password-input&quot; className=&quot;text-right&quot;&gt;
                    Password
                  &lt;/Label&gt;
                  &lt;Input
                    id=&quot;password-input&quot;
                    type=&quot;password&quot;
                    value={passwordInput}
                    onChange={(e) =&gt; setPasswordInput(e.target.value)}
                    onKeyDown={handlePasswordKeyPress}
                    className=&quot;col-span-3&quot;
                    autoFocus
                  /&gt;
              &lt;/div&gt;
              {error &amp;&amp; &lt;p className=&quot;text-sm text-destructive text-center pt-2&quot;&gt;{error}&lt;/p&gt;}
            &lt;/div&gt;
            &lt;DialogFooter&gt;
              &lt;Button variant=&quot;outline&quot; onClick={handleClose}&gt;Cancel&lt;/Button&gt;
              &lt;Button onClick={handlePasswordSubmit}&gt;Continue&lt;/Button&gt;
            &lt;/DialogFooter&gt;
          &lt;/&gt;
        );
      case &#039;reason&#039;:
        return (
          &lt;&gt;
            &lt;DialogHeader&gt;
              &lt;DialogTitle&gt;Confirm Deletion&lt;/DialogTitle&gt;
              &lt;DialogDescription&gt;
                You are about to delete &lt;span className=&quot;font-semibold text-foreground&quot;&gt;{imageName}&lt;/span&gt;. This is irreversible. Please provide a reason.
              &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;div className=&quot;py-4 space-y-2&quot;&gt;
              &lt;Select onValueChange={setReason} value={reason}&gt;
                &lt;SelectTrigger&gt;
                  &lt;SelectValue placeholder=&quot;Select a reason...&quot; /&gt;
                &lt;/SelectTrigger&gt;
                &lt;SelectContent&gt;
                  {deletionReasons.map((r, i) =&gt; (
                    &lt;SelectItem key={i} value={r}&gt;{r}&lt;/SelectItem&gt;
                  ))}
                &lt;/SelectContent&gt;
              &lt;/Select&gt;
              {error &amp;&amp; &lt;p className=&quot;text-sm text-destructive&quot;&gt;{error}&lt;/p&gt;}
            &lt;/div&gt;
            &lt;DialogFooter&gt;
               &lt;Button variant=&quot;outline&quot; onClick={() =&gt; { setError(&quot;&quot;); setStep(&#039;password&#039;); }}&gt;Back&lt;/Button&gt;
              &lt;Button onClick={handleReasonSubmit}&gt;Continue&lt;/Button&gt;
            &lt;/DialogFooter&gt;
          &lt;/&gt;
        );
      case &#039;otp&#039;:
        if (otpSubStep === &#039;enter_email&#039;) {
          return (
            &lt;&gt;
              &lt;DialogHeader&gt;
                &lt;DialogTitle&gt;Email Verification&lt;/DialogTitle&gt;
                &lt;DialogDescription&gt;
                  Enter your email address to receive a one-time password.
                &lt;/DialogDescription&gt;
              &lt;/DialogHeader&gt;
              &lt;form onSubmit={handleSendOTP}&gt;
                &lt;div className=&quot;py-4 space-y-2&quot;&gt;
                  &lt;div className=&quot;grid grid-cols-4 items-center gap-4&quot;&gt;
                    &lt;Label htmlFor=&quot;email-input&quot; className=&quot;text-right&quot;&gt;
                      Email
                    &lt;/Label&gt;
                    &lt;Input
                      id=&quot;email-input&quot;
                      type=&quot;email&quot;
                      value={email}
                      onChange={(e) =&gt; setEmail(e.target.value)}
                      className=&quot;col-span-3&quot;
                      placeholder=&quot;you@example.com&quot;
                      required
                      autoFocus
                    /&gt;
                  &lt;/div&gt;
                  {error &amp;&amp; &lt;p className=&quot;text-sm text-destructive text-center pt-2&quot;&gt;{error}&lt;/p&gt;}
                &lt;/div&gt;
                &lt;DialogFooter&gt;
                  &lt;Button variant=&quot;outline&quot; onClick={() =&gt; { setError(&quot;&quot;); setStep(&#039;reason&#039;); }}&gt;Back&lt;/Button&gt;
                  &lt;Button type=&quot;submit&quot; disabled={isSendingOtp}&gt;
                    {isSendingOtp ? &lt;&gt;&lt;Loader2 className=&quot;h-4 w-4 mr-2 animate-spin&quot; /&gt; Sending...&lt;/&gt; : &#039;Send OTP&#039;}
                  &lt;/Button&gt;
                &lt;/DialogFooter&gt;
              &lt;/form&gt;
            &lt;/&gt;
          )
        }
        return (
           &lt;&gt;
            &lt;DialogHeader&gt;
              &lt;DialogTitle&gt;OTP Verification&lt;/DialogTitle&gt;
              &lt;DialogDescription&gt;
                A 6-digit code has been sent to &lt;span className=&quot;font-semibold text-foreground&quot;&gt;{email}&lt;/span&gt;. Please enter it below.
              &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;div className=&quot;py-4 space-y-2&quot;&gt;
              &lt;div className=&quot;flex justify-center gap-2&quot;&gt;
                  {otpInput.map((digit, index) =&gt; (
                      &lt;Input
                          key={index}
                          id={`otp-${index}`}
                          type=&quot;text&quot;
                          inputMode=&quot;numeric&quot;
                          maxLength={1}
                          value={digit}
                          onChange={(e) =&gt; handleOtpChange(e, index)}
                          onKeyDown={(e) =&gt; handleOtpKeyDown(e, index)}
                          onPaste={handleOtpPaste}
                          className={cn(&#039;w-12 h-14 text-center text-2xl font-bold transition-all&#039;,
                              error ? &#039;border-destructive ring-destructive&#039; : &#039;&#039;,
                              digit === &#039;✔&#039; ? &#039;bg-green-500/20 text-green-500 border-green-500&#039; : &#039;&#039;
                          )}
                          disabled={digit === &#039;✔&#039;}
                      /&gt;
                  ))}
              &lt;/div&gt;
              {error &amp;&amp; &lt;p className=&quot;text-sm text-destructive text-center&quot;&gt;{error}&lt;/p&gt;}
            &lt;/div&gt;
            &lt;DialogFooter&gt;
              &lt;Button variant=&quot;outline&quot; onClick={() =&gt; { setError(&quot;&quot;); setOtpSubStep(&#039;enter_email&#039;); }}&gt;Back&lt;/Button&gt;
              &lt;Button onClick={handleOtpSubmit} disabled={isVerifyingOtp}&gt;
                {isVerifyingOtp ? &lt;&gt;&lt;Loader2 className=&quot;h-4 w-4 mr-2 animate-spin&quot; /&gt; Verifying...&lt;/&gt; : &#039;Verify&#039;}
              &lt;/Button&gt;
            &lt;/DialogFooter&gt;
          &lt;/&gt;
        );
    case &#039;questions&#039;:
        return (
            &lt;&gt;
                &lt;DialogHeader&gt;
                    &lt;DialogTitle&gt;Security Questions&lt;/DialogTitle&gt;
                    &lt;DialogDescription&gt;
                        Please answer the following questions to proceed.
                    &lt;/DialogDescription&gt;
                &lt;/DialogHeader&gt;
                &lt;div className=&quot;py-4 space-y-4&quot;&gt;
                    {securityQuestions.map((q, i) =&gt; (
                        &lt;div key={q.id} className=&quot;grid gap-2&quot;&gt;
                            &lt;Label htmlFor={q.id} className=&quot;flex items-center gap-2 text-muted-foreground&quot;&gt;
                                &lt;HelpCircle className=&#039;h-4 w-4&#039; /&gt;
                                {q.question}
                            &lt;/Label&gt;
                            &lt;div className=&quot;relative&quot;&gt;
                                &lt;Input
                                    id={q.id}
                                    value={questionAnswers[i]}
                                    onChange={(e) =&gt; handleAnswerChange(e, i)}
                                    className={cn(
                                        &#039;pr-8&#039;,
                                        answersStatus[i] === &#039;incorrect&#039; &amp;&amp; &#039;border-destructive&#039;,
                                        answersStatus[i] === &#039;correct&#039; &amp;&amp; &#039;border-green-500&#039;
                                    )}
                                /&gt;
                                {answersStatus[i] === &#039;correct&#039; &amp;&amp; &lt;CheckCircle2 className=&quot;absolute right-2 top-1/2 -translate-y-1/2 h-5 w-5 text-green-500&quot; /&gt;}
                                {answersStatus[i] === &#039;incorrect&#039; &amp;&amp; &lt;XCircle className=&quot;absolute right-2 top-1/2 -translate-y-1/2 h-5 w-5 text-destructive&quot; /&gt;}
                            &lt;/div&gt;
                        &lt;/div&gt;
                    ))}
                    {error &amp;&amp; &lt;p className=&quot;text-sm text-destructive text-center&quot;&gt;{error}&lt;/p&gt;}
                &lt;/div&gt;
                &lt;DialogFooter&gt;
                    &lt;Button variant=&quot;outline&quot; onClick={() =&gt; { setError(&quot;&quot;); setStep(&#039;otp&#039;); }}&gt;Back&lt;/Button&gt;
                    &lt;Button onClick={handleQuestionsSubmit} disabled={!areAllAnswersCorrect}&gt;Verify Answers&lt;/Button&gt;
                &lt;/DialogFooter&gt;
            &lt;/&gt;
        );
    case &#039;deleting&#039;:
        const conicGradient = `conic-gradient(hsl(var(--primary)) ${progress}%, transparent ${progress}%)`;

        return (
            &lt;div className=&quot;w-full h-full bg-background relative flex items-center justify-center overflow-hidden&quot;&gt;
                &lt;DialogHeader className=&quot;sr-only&quot;&gt;
                    &lt;DialogTitle&gt;Deleting Image&lt;/DialogTitle&gt;
                    &lt;DialogDescription&gt;The image is being securely deleted. This process may take up to 30 seconds.&lt;/DialogDescription&gt;
                &lt;/DialogHeader&gt;

                &lt;div className=&quot;liquid-container&quot; style={{ height: `${progress}%` }}&gt;
                    &lt;div className=&quot;wave wave1&quot;&gt;&lt;/div&gt;
                    &lt;div className=&quot;wave wave2&quot;&gt;&lt;/div&gt;
                    &lt;div className=&quot;bubbles&quot;&gt;
                        {bubbles}
                    &lt;/div&gt;
                &lt;/div&gt;
                
                &lt;div className=&quot;relative z-20 flex flex-col items-center gap-6&quot;&gt;
                    &lt;div className=&quot;w-48 h-48 rounded-full flex items-center justify-center bg-primary/10 shadow-lg relative&quot;&gt;
                        &lt;div
                            className=&quot;absolute inset-0 rounded-full&quot;
                            style={{ background: conicGradient }}
                        &gt;&lt;/div&gt;
                        &lt;div className=&quot;relative w-[calc(100%-24px)] h-[calc(100%-24px)] bg-background rounded-full flex items-center justify-center text-4xl font-bold text-primary shadow-inner&quot;&gt;
                            {Math.round(progress)}%
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;Button variant=&quot;ghost&quot; onClick={handleStopDeletion} className=&quot;text-foreground text-lg hover:bg-primary/10&quot;&gt;
                        Stop
                    &lt;/Button&gt;
                &lt;/div&gt;

                &lt;style jsx&gt;{`
                    .liquid-container {
                        position: absolute;
                        bottom: 0;
                        left: 0;
                        width: 100%;
                        background: hsl(var(--primary));
                        z-index: 10;
                        transition: height 0.1s linear;
                        overflow: hidden;
                    }
                    .wave {
                        position: absolute;
                        top: -100px;
                        left: 50%;
                        width: 200vw;
                        height: 100px;
                        background: hsl(var(--background));
                        border-radius: 45%;
                        transform: translateX(-50%);
                        animation: wave-anim 7s linear infinite;
                    }
                    .wave.wave2 {
                        border-radius: 40%;
                        opacity: 0.5;
                        animation: wave-anim 13s linear infinite reverse;
                    }
                    @keyframes wave-anim {
                        from { transform: translateX(-50%) rotate(0deg); }
                        to { transform: translateX(-50%) rotate(360deg); }
                    }

                    .bubbles .bubble {
                        position: absolute;
                        bottom: -100px; /* Start from below the screen */
                        background: hsl(var(--primary-foreground) / 0.15);
                        border-radius: 50%;
                        pointer-events: none;
                        animation: bubble-anim 15s linear infinite;
                    }
                    @keyframes bubble-anim {
                        0% {
                            transform: translateY(0) scale(0.1);
                            opacity: 0;
                        }
                        10% {
                            opacity: 1;
                        }
                        100% {
                            transform: translateY(-110vh) scale(1);
                            opacity: 0;
                        }
                    }

                    /* Styles from other steps to keep */
                    @keyframes tick-in {
                        from { transform: scale(0.5); opacity: 0; }
                        to { transform: scale(1); opacity: 1; }
                    }
                    .tick-animate { animation: tick-in 0.5s cubic-bezier(0.2, 0.8, 0.2, 1); }
                `}&lt;/style&gt;
            &lt;/div&gt;
        );
       case &#039;success&#039;:
        return (
            &lt;div className=&quot;w-full h-full bg-background flex flex-col items-center justify-center gap-4 text-center&quot;&gt;
                &lt;DialogHeader className=&quot;sr-only&quot;&gt;
                    &lt;DialogTitle&gt;Deletion Successful&lt;/DialogTitle&gt;
                    &lt;DialogDescription&gt;The image has been successfully deleted.&lt;/DialogDescription&gt;
                &lt;/DialogHeader&gt;
                 &lt;div className=&quot;w-48 h-48 rounded-full flex items-center justify-center bg-green-500/10 tick-animate&quot;&gt;
                    &lt;Check className=&quot;h-24 w-24 text-green-500&quot; /&gt;
                 &lt;/div&gt;
                 &lt;h2 className=&quot;text-2xl font-bold text-foreground mt-4 tick-animate&quot; style={{ animationDelay: &#039;0.2s&#039; }}&gt;{imageName}&lt;/h2&gt;
                 &lt;p className=&quot;text-lg text-muted-foreground tick-animate&quot; style={{ animationDelay: &#039;0.3s&#039; }}&gt;deleting successful!&lt;/p&gt;
            &lt;/div&gt;
        )
    }
  }

  const isFullScreenStep = step === &#039;deleting&#039; || step === &#039;success&#039;;

  return (
    &lt;Dialog open={isOpen} onOpenChange={handleOpenChange}&gt;
      &lt;DialogTrigger asChild&gt;{trigger}&lt;/DialogTrigger&gt;
      &lt;DialogContent
        onInteractOutside={(e) =&gt; {if(step === &#039;deleting&#039;) e.preventDefault()}}
        onEscapeKeyDown={(e) =&gt; {
            if (isFullScreenStep) e.preventDefault();
            else handleClose();
        }}
        className={cn(
            isFullScreenStep ? &#039;w-screen h-screen max-w-full rounded-none border-0 p-0&#039; : &#039;sm:max-w-md&#039;
        )}
        hideCloseButton={isFullScreenStep}
      &gt;
        {renderContent()}
      &lt;/DialogContent&gt;
    &lt;/Dialog&gt;
  );
}

</code></pre>
</body>
</html>